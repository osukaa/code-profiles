/*
 * Wallaby.js - v1.0.869
 * https://wallabyjs.com
 * Copyright (c) 2014-2020 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of Wallaby.js and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
var path=require("path"),fs=require("graceful-fs"),Q=require("q"),TestRunner,utils,transform,tracer=global.$_$tracer,testRunner,testFiles,testFilesByPath,jestInstalled=!1,EVAL_RESULT_VARIABLE="Object.<anonymous>",jestCliPath="jest-cli",jestRunnerModulePath,transformPath=jestCliPath+"/src/lib/transform",installCommonGlobalsPath,frozenConfig=!1,compactScriptPreprocessor=!1,jasmineFrameworkVersion,localProjectRoot,instrumentedRoot=process.cwd(),inlineSnapshotsSourceFileName="inline_snapshots";global._mergeSetupScript="",global._setupTestFrameworkScriptFile="",process.env.FORCE_COLOR=0;try{localProjectRoot=path.dirname(global.wallaby._localNodeModules),!global.wallaby._localNodeModules||process.env.NODE_PATH&&~process.env.NODE_PATH.indexOf(global.wallaby._localNodeModules)||(process.env.NODE_PATH=(process.env.NODE_PATH?process.env.NODE_PATH+path.delimiter:"")+global.wallaby._localNodeModules);var oldRequireResolve,oldLoader=require.extensions[".js"],oldReadFileSync=require("fs").readFileSync;require("fs").readFileSync=function(e){var t=e.replace(/\\/g,"/"),n=oldReadFileSync.apply(this,arguments);if(~t.indexOf(inlineSnapshotsSourceFileName)){var r=n.replace("_callee$property$loc$.column","0").replace("const {line, column} = callee.property.loc.start;","const {line, column} = callee.property.loc.start; column = 0;");r===n&&console.warn("Possibly incompatible Jest version (inline_snapshots)"),n=r}return n},require.extensions[".js"]=function(e,t){var n,r,i=t.replace(/\\/g,"/");return~i.indexOf("jest-runtime/build/transform")||~i.indexOf("jest-runtime/build/ScriptTransformer")||~i.indexOf("jest-runtime/build/script_transformer")?(n=require("fs").readFileSync(t,"utf8"),r=n.replace("const cache = new Map();","const cache = new Map();global._jestRuntimeCache = cache;").replace(/.readFileSync\(\s*filename,\s*'utf8'\s*\)/,".readFileSync(filename, 'utf8')+(filename === global._setupTestFrameworkScriptFile ? global._mergeSetupScript : \"\")"),r===n&&console.warn("Possibly incompatible Jest version (jest-runtime/build/transform|ScriptTransformer)"),e._compile(r,t)):~i.indexOf("@jest/transform/build/ScriptTransformer")?(n=require("fs").readFileSync(t,"utf8"),r=n.replace("this._cache = projectCache;","this._cache = projectCache;global._jestRuntimeCache = projectCache.transformedFiles;").replace(/.readFileSync\(\s*filename,\s*'utf8'\s*\)/,".readFileSync(filename, 'utf8')+(filename === global._setupTestFrameworkScriptFile ? global._mergeSetupScript : \"\")"),r===n&&console.warn("Possibly incompatible Jest version (@jest/transform/build/ScriptTransformer)"),e._compile(r,t)):~i.indexOf("jest-resolve/build/defaultResolver.js")?(n=require("fs").readFileSync(t,"utf8"),r=n.replace("const checkedPaths = new Map();","const checkedPaths = new Map(); checkedPaths.get = function(){};"),e._compile(r,t)):~i.indexOf("react-native/jest/assetFileTransformer")?(n=require("fs").readFileSync(t,"utf8"),r=n.replace("path.relative(__dirname, filename)",'path.relative(__dirname.replace("'+localProjectRoot+'", "'+process.cwd()+'"), filename)'),r===n&&console.warn("Possibly incompatible Jest version (react-native/jest/assetFileTransformer)"),e._compile(r,t)):~i.indexOf("jest-message-util")?(n=require("fs").readFileSync(t,"utf8"),e._compile(n.replace("renderedCallsite + stacktrace",'"" + stacktrace').replace("`${renderedCallsite}\\n${stacktrace}`","stacktrace"),t)):~i.indexOf("buffered_console")||~i.indexOf("Console")?(n=require("fs").readFileSync(t,"utf8"),~n.indexOf("BufferedConsole")||~n.indexOf("CustomConsole")?e._compile(n.replace("error() {","error() {$_$tracer._error.apply($_$tracer, arguments);").replace("error(firstArg, ...rest) {","error(firstArg, ...rest) {$_$tracer._reportConsoleErrorAsError && $_$tracer._error.apply($_$tracer, arguments);"),t):oldLoader(e,t)):~i.indexOf("source-map-support/source-map-support")?(n=require("fs").readFileSync(t,"utf8"),e._compile(n.replace("function mapSourcePosition(position) {",'function mapSourcePosition(position) {if(position && position.source && ~position.source.replace(/\\\\/g, "/").indexOf("vue-jest/lib/process")) return position;').replace("retrieveMapHandlers = originalRetrieveMapHandlers.slice(0);","retrieveMapHandlers = originalRetrieveMapHandlers.slice(0);retrieveSourceMap = handlerExec(retrieveMapHandlers);retrieveFile = handlerExec(retrieveFileHandlers);"),t)):~i.indexOf("ts-jest/dist/utils")?(n=require("fs").readFileSync(t,"utf8"),r=n.replace("if (configPath === path.join(getStartDir()",'if (configPath === path.join("'+localProjectRoot+'"'),e._compile(r,t)):~i.indexOf("fast_path.js")?(n=require("fs").readFileSync(t,"utf8"),r=~n.indexOf("_path")?n.replace("relativeFilename.indexOf(INDIRECTION_FRAGMENT) === 0","relativeFilename.indexOf(INDIRECTION_FRAGMENT) === 0 || _path().default.isAbsolute(relativeFilename)"):n.replace("relativeFilename.indexOf(INDIRECTION_FRAGMENT) === 0","relativeFilename.indexOf(INDIRECTION_FRAGMENT) === 0 || path().isAbsolute(relativeFilename)"),e._compile(r,t)):(n=require("fs").readFileSync(t,"utf8"),r=n.replace("(globalObject, globals) {","(globalObject, globals) {\n        if (!globalObject.$_$tracer) {\n          if (!globalObject.regeneratorRuntime && global.regeneratorRuntime) {\n            globalObject.regeneratorRuntime = global.regeneratorRuntime;\n          }\n          globalObject.$_$wp = global.$_$wp;\n          globalObject.$_$wpe = global.$_$wpe;\n          globalObject.$_$w = global.$_$w;\n          globalObject.$_$w_ = global.$_$w_;\n          globalObject.$_$wf = global.$_$wf;\n          globalObject.$_$wv = global.$_$wv;\n          globalObject.$_$tracer = global.$_$tracer;\n          global.$_$tracer.setEnvGlobal(globalObject);\n          globalObject.$_$tracer._jasmineAdapter = new global.$_$tracer.Jasmine2Reporter(global.$_$tracer);\n        }\n      "),e._compile(r,t))};var rootPathFromTestingFramework=function(e){return global.wallaby._testFrameworkPath?path.join(path.dirname(global.wallaby._testFrameworkPath),e):e},findModule=function(e,t,n){try{var r=e+t,i=require(rootPathFromTestingFramework(r));return n&&n(e,t,i["default"]?i["default"]:i),!0}catch(o){return!1}},foundTestRunner=function(e,t,n){jestCliPath=e,TestRunner=n};if(findModule("react-scripts/node_modules/jest-cli","/build/TestRunner",foundTestRunner)||findModule("react-scripts/node_modules/jest-cli","/build/test_scheduler",foundTestRunner)||findModule("react-scripts/node_modules/jest-cli","/build/TestScheduler",foundTestRunner)||findModule("react-scripts/node_modules/jest/node_modules/jest-cli","/build/TestRunner",foundTestRunner)||findModule("react-scripts/node_modules/jest/node_modules/jest-cli","/build/test_scheduler",foundTestRunner)||findModule("react-scripts/node_modules/jest/node_modules/jest-cli","/build/TestScheduler",foundTestRunner)||findModule("jest-cli/node_modules/@jest/core","/build/TestScheduler",foundTestRunner)||findModule("jest/node_modules/jest-cli/node_modules/@jest/core","/build/TestScheduler",foundTestRunner)||findModule("@jest/core","/build/TestScheduler",foundTestRunner)||findModule("jest-cli","/build/TestRunner",foundTestRunner)||findModule("jest-cli","/build/TestScheduler",foundTestRunner)||findModule("jest-cli","/build/test_scheduler",foundTestRunner)||findModule("jest-cli","/src/TestRunner",foundTestRunner)||findModule("jest/node_modules/jest-cli","/build/TestRunner",foundTestRunner)||findModule("jest/node_modules/jest-cli","/build/test_scheduler",foundTestRunner)||findModule("jest/node_modules/jest-cli","/build/TestScheduler",foundTestRunner),!TestRunner)throw new Error("Cannot find Jest test runner");var foundJestRunnerModule=function(e){jestRunnerModulePath=e};if(findModule(jestCliPath+"/node_modules/jest-runner","",foundJestRunnerModule)||findModule(path.join(jestCliPath,"../jest-runner"),"",foundJestRunnerModule)||findModule("jest-runner","",foundJestRunnerModule),jestRunnerModulePath){var jestRuntimeDeepPath=jestRunnerModulePath+"/node_modules/jest-runtime",jestRuntimeShallowPath=path.join(jestRunnerModulePath,"../jest-runtime"),removeDirsAboveInstrumentedRootAndAppendLocalNodeModules=function(e){if(!e||!e[0]||!~e[0].indexOf(instrumentedRoot))return e;for(var t=[],n=!1,r=path.dirname(e[0]),i=function(e){t.push(e),t.push(e.replace(instrumentedRoot,localProjectRoot))},o=0;o<e.length;o++){var s=e[o];if(s){var a=path.dirname(s);if(!n){var l=r===a;r=path.dirname(a),l?~a.indexOf(instrumentedRoot)&&i(s):n=!0}n&&i(s)}}return t},foundJestResolveNodeModules=function(e,t){var n=e+t,r=require.cache[require.resolve(n)].exports;r=r["default"]||r;var i=function(e,t){var n=(r.apply(this,arguments)||[]).slice(),i=removeDirsAboveInstrumentedRootAndAppendLocalNodeModules(n);if(!(e&&t&&t.paths&&t.paths.length))return i;var o=n.length&&n[n.length-1]===t.paths[t.paths.length-1];if(o)return i;var s,a,l={};for(s=0;s<t.paths.length;s++){var c=t.paths[s];l[c]=!0,~e.indexOf(c)&&(a=!0)}if(!a)return i;var u={},h=[];for(s=i.length-1;s>=0;s--){var d=i[s];l[d]?u[d]||(h.unshift(d),u[d]=!0):h.unshift(d)}return h};i["default"]=i,require.cache[require.resolve(n)].exports=i};if(!(findModule(jestRuntimeDeepPath+"/node_modules/jest-resolve","/build/node_modules_paths",foundJestResolveNodeModules)||findModule(jestRuntimeDeepPath+"/node_modules/jest-resolve","/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule(path.join(jestRuntimeDeepPath,"../jest-resolve"),"/build/node_modules_paths",foundJestResolveNodeModules)||findModule(path.join(jestRuntimeDeepPath,"../jest-resolve"),"/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule(jestRuntimeShallowPath+"/node_modules/jest-resolve","/build/node_modules_paths",foundJestResolveNodeModules)||findModule(jestRuntimeShallowPath+"/node_modules/jest-resolve","/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule(path.join(jestRuntimeShallowPath,"../jest-resolve"),"/build/node_modules_paths",foundJestResolveNodeModules)||findModule(path.join(jestRuntimeShallowPath,"../jest-resolve"),"/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule(jestRunnerModulePath+"/node_modules/jest-resolve","/build/node_modules_paths",foundJestResolveNodeModules)||findModule(jestRunnerModulePath+"/node_modules/jest-resolve","/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule(path.join(jestRunnerModulePath,"../jest-resolve"),"/build/node_modules_paths",foundJestResolveNodeModules)||findModule(path.join(jestRunnerModulePath,"../jest-resolve"),"/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule("jest-resolve","/build/node_modules_paths",foundJestRunnerModule)||findModule("jest-resolve","/build/nodeModulesPaths",foundJestRunnerModule)))throw new Error("Cannot find node_modules_paths")}var jestConfigModule,foundNormalizedConfig=function(e,t,n){utils={normalizeConfig:n};var r=utils.normalizeConfig;utils.normalizeConfig=function(){var e=r.apply(this,arguments);return utils.cachedNormalizedConfig=e,e},jestConfigModule=e},patchJestConfig=function(e,t,n){foundNormalizedConfig(e,t,n),jestConfigModule=require(jestConfigModule),jestConfigModule=jestConfigModule["default"]||jestConfigModule;var r=jestConfigModule.normalize;jestConfigModule.normalize=function(){return utils.cachedNormalizedConfig?utils.cachedNormalizedConfig:r.apply(this,arguments)}};findModule(jestCliPath,"/src/lib/utils",function(e,t,n){utils=n})||findModule(jestCliPath,"/src/config/normalize",foundNormalizedConfig)||(findModule(jestCliPath+"/node_modules/jest-config","/build/normalize",patchJestConfig)||findModule(path.join(jestCliPath,"../jest-config"),"/build/normalize",patchJestConfig)||findModule("jest-config","/build/normalize",patchJestConfig),jestRunnerModulePath&&(findModule(jestRunnerModulePath+"/node_modules/jest-config","/build/normalize",patchJestConfig)||findModule(path.join(jestRunnerModulePath,"../jest-config"),"/build/normalize",patchJestConfig)));var foundBaseReporter=function(e,t,n){var r=n.prototype;r.log=r._write=function(e){console.log(e+"\n")}},foundDefaultReporter=function(e,t,n){var r=n.prototype;r._clearWaitingOn=function(){}},foundSummaryReporter=function(e,t,n){var r=n.prototype;r.log=r._write=function(e){}};findModule(jestCliPath,"/build/reporters/BaseReporter",foundBaseReporter)&&findModule(jestCliPath,"/build/reporters/DefaultReporter",foundDefaultReporter)||findModule(jestCliPath,"/build/reporters/base_reporter",foundBaseReporter),findModule(jestCliPath,"/build/reporters/summary_reporter",foundSummaryReporter),findModule(jestCliPath,"/../reporters/build/base_reporter",foundBaseReporter),findModule(jestCliPath,"/../reporters/build/summary_reporter",foundSummaryReporter);var initCommonGlobalsInstall=function(e){installCommonGlobalsPath=e};if(!(findModule(jestCliPath+"/src/environments/installCommonGlobals","",initCommonGlobalsInstall)||findModule(jestCliPath+"/node_modules/jest-util/build/install_common_globals","",initCommonGlobalsInstall)||findModule(path.join(jestCliPath+"/../jest-util/build/install_common_globals"),"",initCommonGlobalsInstall)||findModule("jest-util/build/install_common_globals","",initCommonGlobalsInstall)||findModule(jestCliPath+"/node_modules/jest-util/build/installCommonGlobals","",initCommonGlobalsInstall)||findModule(path.join(jestCliPath+"/../jest-util/build/installCommonGlobals"),"",initCommonGlobalsInstall)||findModule("jest-util/build/installCommonGlobals","",initCommonGlobalsInstall)||findModule(jestCliPath+"/node_modules/jest-util/src/installCommonGlobals","",initCommonGlobalsInstall)||findModule("jest-util/src/installCommonGlobals","",initCommonGlobalsInstall)||findModule(jestCliPath+"/node_modules/jest-util/lib/installCommonGlobals","",initCommonGlobalsInstall)||findModule("jest-util/lib/installCommonGlobals","",initCommonGlobalsInstall)))throw new Error("Can not find install_common_globals path");compactScriptPreprocessor=frozenConfig=!TestRunner.prototype._loadConfigDependencies;try{transformPath=jestCliPath+"/src/lib/transform",transform=require(transformPath)}catch(e){}jestInstalled=!0}catch(e){tracer.start(function(){tracer.reportGlobalError("Failed to initialize wallaby jest.\n"+(e.stack||""))}),module.exports={init:function(){return{configure:function(){}}}}}var initializeTestsByFilePath=function(){testFilesByPath||(testFilesByPath={},global.$_$testFiles.forEach(function(e){testFilesByPath[e.path]=e}))},remapInlineSnapshot=function(e){if(e.frame){var t=testFilesByPath[path.normalize(e.frame.file)];if(t){var n=t.path,r=t.originalType;n&&r&&(n=setOriginalFileTypePath(n,r)),n=n.replace(process.cwd(),localProjectRoot),e.frame.file=n,t.lineMap&&(e.frame.line=tracer._utils.getOriginalLineByGeneratedLine(t.lineMap,e.frame.line,e.frame.column)||e.frame.line,e.frame.column=1)}}},setOriginalFileTypePath=function(e,t){var n=e.split(".");return n.length>=2&&(n[n.length-1]=t,e=n.join(".")),e},jasmineVersion=function(e){return!e||e.testRunner&&!~e.testRunner.indexOf("jasmine2")?1:2},sameSession=function(e){return e._wallabySession===global.$_$session},setSession=function(e){e._wallabySession=global.$_$session},JasmineReporter=function(e){var t=e.initialSpecId();this.reportRunnerStarting=function(){},this.reportRunnerResults=function(){global.$_$initialSpecId=t+1},this.reportSpecStarting=function(n){n.id=++t,e.specStart(n.id,n.description),n.results_.time=(new e._Date).getTime()},this.reportSpecResults=function(t){for(var n=e.specEnd(),r={id:t.id,timeRange:n,name:t.description,suite:[],success:0===t.results_.failedCount,skipped:t.results_.skipped,time:t.results_.skipped?0:(new e._Date).getTime()-t.results_.time,log:[]},i=t.suite;i;)r.suite.unshift(i.description),i=i.parentSuite;if(!r.success&&!r.skipped)for(var o=t.results_.items_,s=0;s<o.length;s++){var a=o[s];a.passed_||(a.showDiff=a.showDiff||"toEqual"===a.matcherName,r.log.push(e.setAssertionData(a,{message:a.message,stack:a.trace&&a.trace.stack?a.trace.stack:e._undefined})))}r.log.length||delete r.log,e.result(r)},this.specFilter=function(t){if(!e.hasSpecFilter())return!0;for(var n=[t.description],r=t.suite;r;)n.unshift(r.description),r=r.parentSuite;return e.specFilter(n)}},Jasmine2Reporter=tracer.Jasmine2Reporter=function(e){var t=global.$_$session,n=e.initialSpecId(),r=[],i=function(){return t!==global.$_$session};this.jasmineDone=function(){i()||(global.$_$initialSpecId=n+1)},this.jasmineStarted=function(){i()||e.started({total:"unknown number of"})},this.suiteStarted=function(e){i()||r.push(e.description)},this.suiteDone=function(){i()||r.pop()},this.specStarted=function(t){i()||(t._id=++n,e.specStart(t._id,t.fullName),t._time=(new e._Date).getTime())},this.specDone=function(t){if(!i()){var n=e.specEnd(),o="disabled"===t.status||"pending"===t.status||"todo"===t.status,s={id:t._id,timeRange:n,name:t.description,suite:r.slice(),success:"passed"===t.status,skipped:o,time:o?0:(new e._Date).getTime()-t._time,log:[],testFile:t._testFile};if(!s.success&&!s.skipped)for(var a=t.failedExpectations,l=0;l<a.length;l++){var c=a[l];if(c.error){if(c.message&&0===c.message.indexOf("Error: expect(")){var u=c.message.split("\n");u.shift(),u[0]&&0!==u[0].length||u.shift(),c.message=u.join("\n")}c.error.matcherResult?(c.matcherName=c.error.matcherResult.name,c.actual=c.error.matcherResult.actual,c.expected=c.error.matcherResult.expected):(c.showDiff=c.error.showDiff,c.actual=c.error.actual,c.expected=c.error.expected)}c.showDiff=c.showDiff||"toEqual"===c.matcherName||"toBe"===c.matcherName||"toMatchSnapshot"===c.matcherName||"toMatchInlineSnapshot"===c.matcherName,s.log.push(e.setAssertionData(c,{message:c.message,stack:c.stack}))}s.log.length||delete s.log,e.result(s)}}};if(jestInstalled){var nodeFs=require("fs"),originalWriteFileSync=nodeFs.writeFileSync;originalWriteFileSync.alreadyReplaced||(nodeFs.writeFileSync=function(e,t,n){try{if(".snap"===path.extname(e)&&0===e.indexOf(global.wallaby.projectCacheDir)){var r=require("fs-extra"),i=path.join(global.wallaby.localProjectDir,path.relative(global.wallaby.projectCacheDir,e));i&&(r.ensureDirSync(path.dirname(i)),originalWriteFileSync(i,t,n))}}catch(o){console.error(o.stack)}return originalWriteFileSync(e,t,n)},nodeFs.writeFileSync.alreadyReplaced=!0);var jasmineInitializerPath={1:path.join(__dirname,"jasmineInitializer.js"),2:path.join(__dirname,"jasmine2Initializer.js")},jasmineInitializerCode={1:"\n"+fs.readFileSync(jasmineInitializerPath[1]),2:"\n"+fs.readFileSync(jasmineInitializerPath[2])};if(utils.runContentWithLocalBindings=function(e,t,n,r){var i=+new Date;if(global.$_$tracer&&global.$_$tracer.isInitialized()){var o=Object.keys(r);e.global&&e.runSourceText('this["'+EVAL_RESULT_VARIABLE+'"] = function ('+o.join(",")+") {"+t+"\n};",n);var s=e.global?e.global[EVAL_RESULT_VARIABLE]:e("(function("+o.join(",")+"){"+t+"\n})",n);e.global&&delete e.global[EVAL_RESULT_VARIABLE];var a=o.map(function(e){return r[e]});s.apply(null,a);var l=+new Date;tracer.debugLog("Loaded "+(global.wallaby?n.replace(global.wallaby.localProjectDir,"").replace(global.wallaby.projectCacheDir,""):n)+" in "+(l-i)+" milliseconds")}},utils.readAndPreprocessFileContent=function(e,t){var n=fs.readFileSync(e,"utf8");if("#!"===n.substr(0,2)&&(n=n.replace(/^#!.*/,"")),t.scriptPreprocessor&&!t.preprocessorIgnorePatterns.some(function(t){if(t)return t.test||(t=new RegExp(t)),t.test(e)}))try{n=compactScriptPreprocessor?require(t.scriptPreprocessor).process(n,e,t):require(t.scriptPreprocessor).process(n,e,{},[],t)}catch(r){throw r.message=t.scriptPreprocessor+": "+r.message,r}return global._mergeSetupScript&&t.setupTestFrameworkScriptFile===e&&(n+=global._mergeSetupScript),n},transform&&(require.cache[require.resolve(transformPath)].exports=utils.readAndPreprocessFileContent),installCommonGlobalsPath){var originalInstallCommonGlobals=require.cache[require.resolve(rootPathFromTestingFramework(installCommonGlobalsPath))].exports;originalInstallCommonGlobals=originalInstallCommonGlobals["default"]||originalInstallCommonGlobals;var newInstallCommonGlobals=function(e,t){e.$_$tracer||(!e.regeneratorRuntime&&global.regeneratorRuntime&&(e.regeneratorRuntime=global.regeneratorRuntime),e.$_$wp=global.$_$wp,e.$_$wpe=global.$_$wpe,e.$_$w=global.$_$w,e.$_$w_=global.$_$w_,e.$_$wf=global.$_$wf,e.$_$wv=global.$_$wv,e.$_$tracer=global.$_$tracer,global.$_$tracer.setEnvGlobal(e),e.$_$tracer._jasmineAdapter=1===jasmineFrameworkVersion?new JasmineReporter(global.$_$tracer):new Jasmine2Reporter(global.$_$tracer)),originalInstallCommonGlobals(e,t)};newInstallCommonGlobals["default"]=newInstallCommonGlobals,require.cache[require.resolve(rootPathFromTestingFramework(installCommonGlobalsPath))].exports=newInstallCommonGlobals;var foundJestUtil=function(e,t,n){n.installCommonGlobals=newInstallCommonGlobals};findModule(jestCliPath+"/node_modules/jest-util","",foundJestUtil),findModule(path.join(jestCliPath+"/../jest-util"),"",foundJestUtil),findModule(path.join(installCommonGlobalsPath,"../.."),"",foundJestUtil),findModule("jest-util","",foundJestUtil),findModule("jest-environment-jsdom/node_modules/jest-util","",foundJestUtil),findModule("jest-environment-node/node_modules/jest-util","",foundJestUtil),findModule("jest-config/node_modules/jest-util","",foundJestUtil),findModule("jest-environment-jsdom-thirteen/node_modules/jest-util","",foundJestUtil),jestRunnerModulePath&&(findModule(jestRunnerModulePath+"/node_modules/jest-util","",foundJestUtil),findModule(path.join(jestRunnerModulePath,"/../jest-util"),"",foundJestUtil))}TestRunner.prototype._loadConfigDependencies=function(){var e=this._config;if(null===this._configDeps){this._configDeps={ModuleLoader:require(e.moduleLoader),testRunner:require(e.testRunner).bind(null)};var t=require(e.testEnvironment);this._configDeps.testEnvironment=function(e){var n=new t(e);return n.global.$_$wp=global.$_$wp,n.global.$_$wpe=global.$_$wpe,n.global.$_$w=global.$_$w,n.global.$_$wf=global.$_$wf,n.global.$_$tracer=global.$_$tracer,n.global.$_$tracer._jasmineAdapter=1===jasmineFrameworkVersion?new JasmineReporter(global.$_$tracer):new Jasmine2Reporter(global.$_$tracer),n}}return this._configDeps};var WallabyReporter=function(e){this._completeRun=e};WallabyReporter.prototype={onRunStart:function(){},onTestStart:function(){},getLastError:function(){return this._error},_setError:function(e){this._error=e},onTestResult:function(e,t){t.testExecError&&sameSession(this)&&(tracer.reportGlobalError(t.testExecError),this._completeRun())},onRunComplete:function(e,t){!tracer.canUpdateSnapshots()&&t&&t.testResults&&t.testResults.forEach&&t.testResults.forEach(function(e){if(e&&e.snapshot&&e.snapshot.unchecked){var t=e.snapshot.unchecked+" snapshot"+(e.snapshot.unchecked>1?"s":"")+" obsolete "+(e.snapshot.uncheckedKeys&&"\n\t"+e.snapshot.uncheckedKeys.join("\n\t")||"");tracer.reportGlobalErrorObject({message:t,stack:t+"\n    at "+e.testFilePath+":1:0",snapshot:!0,allowNotMappedStackLines:!0})}}),this._completeRun()},on:function(){},setState:function(){},isInterrupted:function(){return!1},isWatchMode:function(){return!1}},tracer.start(function(){if(!testRunner){var e;try{e=require(path.join(localProjectRoot,"jest.config"))}catch(t){}if(!e)try{e=require(path.join(localProjectRoot,"package.json")).jest}catch(t){}configure(e)}testFilesByPath=void 0;var n=global.$_$session;testRunner.then(function(e){if(n===global.$_$session){var t=!1,r=e._config||e._globalConfig;r.config&&r.config.rootDir&&(r=r.config),r.updateSnapshot=tracer.canUpdateSnapshots()?"all":process.env.CI?"none":e._globalConfig?"new":void 0;var i=function(e){!t&&sameSession({_wallabySession:n})&&(t=!0,tracer.resetEnvGlobal(),tracer.complete(e))},o=new WallabyReporter(i);setSession(o),e.removeReporter&&e.removeReporter(WallabyReporter),e.addReporter&&e.addReporter(o);var s=e.scheduleTests,a=s?e.scheduleTests.bind(e):e.runTests.bind(e);Q.when().then(function(){return!r.globalSetup||require(r.globalSetup)()}).then(function(){return a(e._globalConfig?testFiles.map(function(t){return{context:e._wallabyContext,path:t}}):testFiles,o).then(function(){return Q.when().then(function(){return!r.globalTeardown||require(r.globalTeardown)()})}).then(function(){i()},function(e){e&&console.error(e.stack),i()})})}})["catch"](function(e){console.error("Error while trying to initialize jest: "+(e&&e.message||""))})});var replaceProjectDir=function(e){if("[object String]"!==Object.prototype.toString.call(e)||~e.indexOf("node_modules"))return e;var t=e.replace(/^\.\//,"<rootDir>/").replace("<rootDir>",global.wallaby.projectCacheDir),n=path.normalize(t);return~n.indexOf(path.normalize(global.wallaby.projectCacheDir))?t:e},replaceProjectDirInAllRelevantConfigValues=function(e){for(var t=["moduleNameMapper","moduleDirectories","modulePaths","setupTestFrameworkScriptFile","setupFiles","setupFilesAfterEnv","snapshotSerializers","transform","globalSetup","globalTeardown"],n=0,r=t.length;n<r;n++){var i=t[n],o=e[i];if(o){var s=Object.prototype.toString.call(o);switch(s){case"[object Array]":for(var a=0;a<o.length;a++)o[a]=replaceProjectDir(o[a]);break;case"[object Object]":for(var l in o)o.hasOwnProperty(l)&&(o[l]=replaceProjectDir(o[l]));break;case"[object String]":e[i]=replaceProjectDir(o)}}}},configure=function(e){e=e||{},delete e.scriptPreprocessor,delete e.testFileExtensions,delete e.testDirectoryName,e.notify=!1,e.bail=!1,e.collectCoverage=!1,e.rootDir=e.rootDir&&path.resolve(localProjectRoot,e.rootDir.replace(process.cwd(),localProjectRoot))||localProjectRoot||process.cwd(),e.name=e.rootDir.replace(/[\/\\]|\s/g,"-"),e.cache=e.cache!==!1,e.globals=e.globals||{},e.globals["ts-jest"]=e.globals["ts-jest"]||{},e.globals["ts-jest"].diagnostics=!1,replaceProjectDirInAllRelevantConfigValues(e),foundJestUtil&&e.testEnvironment&&findModule(e.testEnvironment+"/node_modules/jest-util","",foundJestUtil),e=utils.normalizeConfig(e,{}),e.config&&e.config.rootDir&&(e=e.config),e.options&&e.options.rootDir&&(e=e.options);try{e.testEnvironment=require.resolve("jest-config/node_modules/"+e.testEnvironment)}catch(t){}if(e.moduleFileExtensions&&e.moduleFileExtensions.length){var n=[],r=[];e.moduleFileExtensions.forEach(function(e,t){"js"!==e&&"jsx"!==e||(n.unshift(t),r.unshift(e))}),n.forEach(function(t){e.moduleFileExtensions.splice(t,1)}),r.forEach(function(t){e.moduleFileExtensions.unshift(t)})}if(e.modulePaths&&e.modulePaths.length)for(var i=0;i<e.modulePaths.length;i++){var o=e.modulePaths[i];o&&~o.indexOf(e.rootDir)&&!~o.indexOf(localProjectRoot)&&(e.modulePaths[i]=o.replace(e.rootDir,process.cwd()))}if(jasmineFrameworkVersion=jasmineVersion(e),e.setupTestFrameworkScriptFile?(global._setupTestFrameworkScriptFile=e.setupTestFrameworkScriptFile,global._mergeSetupScript=jasmineInitializerCode[jasmineFrameworkVersion]):e.setupTestFrameworkScriptFile=jasmineInitializerPath[jasmineFrameworkVersion],e.setupFilesAfterEnv&&(delete e.setupTestFrameworkScriptFile,delete global._setupTestFrameworkScriptFile,delete global._mergeSetupScript,e.setupFilesAfterEnv.unshift(jasmineInitializerPath[jasmineFrameworkVersion])),e.maxWorkers=1,e.verbose=!1,e.cwd=process.cwd(),"prettier"===e.prettierPath)try{e.prettierPath=require.resolve(path.join(localProjectRoot,"node_modules/prettier"))}catch(t){}var s,a,l,c;try{var u=function(e,t,n){c=n,a=c.buildHasteMap||c.createHasteContext||c.createContext};findModule(jestCliPath+"/node_modules/jest-runtime","",u)||findModule(path.join(jestCliPath+"/../jest-runtime"),"",u)||findModule("jest-runtime","",u),jestRunnerModulePath&&(findModule(jestRunnerModulePath+"/node_modules/jest-runtime","",u)||findModule(path.join(jestRunnerModulePath+"/../jest-runtime"),"",u));var h={maxWorkers:1};if(process.env.NO_WATCHMAN&&(h.watchman=!1),s=a(e,h),l=!!s.then,c.prototype){var d=c.prototype.requireModule;d._wallabyReplaced||(d._wallabyReplaced=!0,c.prototype.requireModule=function(e,t,n){var r=d.apply(this,arguments);if(e&&~e.replace(/\\/g,"/").indexOf("jest-snapshot"))if("./utils"===t&&r.getSnapshotPath&&!r.getSnapshotPath._replaced){initializeTestsByFilePath();var i=r.getSnapshotPath;r.getSnapshotPath=function(){var e=arguments[0],t=(testFilesByPath[path.normalize(e)]||{}).originalType;return e&&t&&(e=setOriginalFileTypePath(e,t)),arguments[0]=e,i.apply(this,arguments)},r.getSnapshotPath._replaced=!0}else if("./snapshot_resolver"===t&&r.buildSnapshotResolver&&!r.buildSnapshotResolver._replaced){initializeTestsByFilePath();var o=r.buildSnapshotResolver;r.buildSnapshotResolver=function(){var e=o.apply(this,arguments),t=e.resolveSnapshotPath;return e.resolveSnapshotPath=function(){var e=arguments[0],n=(testFilesByPath[path.normalize(e)]||{}).originalType;return e&&n&&(e=setOriginalFileTypePath(e,n)),arguments[0]=e,t.apply(this,arguments)},e},r.buildSnapshotResolver._replaced=!0}else if(t==="./"+inlineSnapshotsSourceFileName&&r.saveInlineSnapshots&&!r.saveInlineSnapshots._replaced){initializeTestsByFilePath();var s=r.saveInlineSnapshots;r.saveInlineSnapshots=function(){var e=arguments[0];return e.forEach(remapInlineSnapshot),s.apply(this,arguments)},r.saveInlineSnapshots._replaced=!0}return r})}else console.error("Error while trying to integrate with jest-snapshot")}catch(t){console.error("Error while trying to initialize jest: "+t.message)}TestRunner.length>4&&console.warn("Possibly incompatible Jest version (TestRunner)");var p=function(e){var t=e._mocks||e._raw&&e._raw.mocks;if(!t)return void console.warn("Failed to process Jest mocks");var n=function(e){return"[object Map]"===Object.prototype.toString.call(e)?{forEach:function(t){e.forEach(function(e,n){t(n)})},get:function(t){return e.get(t)},set:function(t,n){e.set(t,n)}}:{forEach:function(t){for(var n in e)t(n)},get:function(t){return e[t]},set:function(t,n){e[t]=n}}},r=n(t);r.forEach(function(t){var n=r.get(t);if(n&&"string"==typeof n){n=n.split(".");var i=n[n.length-1];"ts"!==i&&"tsx"!==i||(n[n.length-1]="js"),n=n.join("."),n=n.replace(localProjectRoot,global.wallaby.projectCacheDir),e._raw&&e._raw.rootDir&&(n=path.join(global.wallaby.projectCacheDir,n)),fs.existsSync(n)&&r.set(t,e._raw&&e._raw.rootDir?path.relative(e._raw.rootDir,n):n)}});var i=e._raw&&e._raw.map;if(i){var o=n(i);o.forEach(function(e){var t=o.get(e);if(t)for(var n in t){var r=t[n];if(r&&"string"==typeof r[0]&&r[0]!==path.join(localProjectRoot,"package.json")&&!~r[0].indexOf("node_modules")){var i=r[0].replace(localProjectRoot,global.wallaby.projectCacheDir);fs.existsSync(i)&&(r[0]=i)}}})}};testRunner=TestRunner.length>=3&&"TestScheduler"!==TestRunner.name?l?s.then(function(t){return Q.when(new TestRunner(t,e,{runInBand:!0,maxWorkers:1,getTestSummary:function(){return""}}))}):Q.when(new TestRunner(s,e,{runInBand:!0,maxWorkers:1})):l?s.then(function(t){t.moduleMap&&p(t.moduleMap);var n=new TestRunner(e,{runInBand:!0,maxWorkers:1,pattern:{input:""}});return n._wallabyContext=t,Q.when(n)}):Q.when(new TestRunner(e,{runInBand:!0,maxWorkers:1}))};module.exports={init:function(e){var t=global._jestRuntimeCache;return t&&t.forEach(function(e,n){~n.indexOf(global.$_$baseDir)&&t["delete"](n)}),testFiles=e,{configure:function(e){testRunner||configure(e)}}}}}