/*
 * Wallaby.js - v1.0.869
 * https://wallabyjs.com
 * Copyright (c) 2014-2020 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of Wallaby.js and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
!function(){function e(t){var n=e.resolve(t),r=e.modules[n];if(!r)throw new Error('failed to require "'+t+'"');return r.exports||(r.exports={},r.call(r.exports,r,r.exports,e.relative(n))),r.exports}function t(){for(var e=(new r).getTime();h.length&&(new r).getTime()-e<100;)h.shift()();u=h.length?i(t,0):null}e.modules={},e.resolve=function(t){var n=t,r=t+".js",i=t+"/index.js";return e.modules[r]&&r||e.modules[i]&&i||n},e.register=function(t,n){e.modules[t]=n},e.relative=function(t){return function(n){if("."!=n.charAt(0))return e(n);var r=t.split("/"),i=n.split("/");r.pop();for(var o=0;o<i.length;o++){var s=i[o];".."==s?r.pop():"."!=s&&r.push(s)}return e(r.join("/"))}},e.register("browser/debug.js",function(e,t,n){e.exports=function(e){return function(){}}}),e.register("browser/diff.js",function(e,t,n){var r=function(){function e(e){return{newPos:e.newPos,components:e.components.slice(0)}}function t(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}function n(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;")}var r=function(e){this.ignoreWhitespace=e};r.prototype={diff:function(t,n){if(n===t)return[{value:n}];if(!n)return[{value:t,removed:!0}];if(!t)return[{value:n,added:!0}];n=this.tokenize(n),t=this.tokenize(t);var r=n.length,i=t.length,o=r+i,s=[{newPos:-1,components:[]}],a=this.extractCommon(s[0],n,t,0);if(s[0].newPos+1>=r&&a+1>=i)return s[0].components;for(var l=1;l<=o;l++)for(var c=-1*l;c<=l;c+=2){var u,h=s[c-1],d=s[c+1];a=(d?d.newPos:0)-c,h&&(s[c-1]=void 0);var p=h&&h.newPos+1<r,f=d&&0<=a&&a<i;if(p||f){!p||f&&h.newPos<d.newPos?(u=e(d),this.pushComponent(u.components,t[a],void 0,!0)):(u=e(h),u.newPos++,this.pushComponent(u.components,n[u.newPos],!0,void 0));var a=this.extractCommon(u,n,t,c);if(u.newPos+1>=r&&a+1>=i)return u.components;s[c]=u}else s[c]=void 0}},pushComponent:function(e,t,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={value:this.join(i.value,t),added:n,removed:r}:e.push({value:t,added:n,removed:r})},extractCommon:function(e,t,n,r){for(var i=t.length,o=n.length,s=e.newPos,a=s-r;s+1<i&&a+1<o&&this.equals(t[s+1],n[a+1]);)s++,a++,this.pushComponent(e.components,t[s],void 0,void 0);return e.newPos=s,a},equals:function(e,t){var n=/\S/;return!(!this.ignoreWhitespace||n.test(e)||n.test(t))||e===t},join:function(e,t){return e+t},tokenize:function(e){return e}};var i=new r,o=new r((!0)),s=new r;o.tokenize=s.tokenize=function(e){return t(e.split(/(\s+|\b)/))};var a=new r((!0));a.tokenize=function(e){return t(e.split(/([{}:;,]|\s+)/))};var l=new r;return l.tokenize=function(e){for(var t=[],n=e.split(/^/m),r=0;r<n.length;r++){var i=n[r],o=n[r-1];"\n"==i&&o&&"\r"===o[o.length-1]?t[t.length-1]+="\n":i&&t.push(i)}return t},{Diff:r,diffChars:function(e,t){return i.diff(e,t)},diffWords:function(e,t){return o.diff(e,t)},diffWordsWithSpace:function(e,t){return s.diff(e,t)},diffLines:function(e,t){return l.diff(e,t)},diffCss:function(e,t){return a.diff(e,t)},createPatch:function(e,t,n,r,i){function o(e){return e.map(function(e){return" "+e})}function s(e,t,n){var r=c[c.length-2],i=t===c.length-2,o=t===c.length-3&&(n.added!==r.added||n.removed!==r.removed);/\n$/.test(n.value)||!i&&!o||e.push("\\ No newline at end of file")}var a=[];a.push("Index: "+e),a.push("==================================================================="),a.push("--- "+e+("undefined"==typeof r?"":"\t"+r)),a.push("+++ "+e+("undefined"==typeof i?"":"\t"+i));var c=l.diff(t,n);c[c.length-1].value||c.pop(),c.push({value:"",lines:[]});for(var u=0,h=0,d=[],p=1,f=1,_=0;_<c.length;_++){var g=c[_],m=g.lines||g.value.replace(/\n$/,"").split("\n");if(g.lines=m,g.added||g.removed){if(!u){var v=c[_-1];u=p,h=f,v&&(d=o(v.lines.slice(-4)),u-=d.length,h-=d.length)}d.push.apply(d,m.map(function(e){return(g.added?"+":"-")+e})),s(d,_,g),g.added?f+=m.length:p+=m.length}else{if(u)if(m.length<=8&&_<c.length-2)d.push.apply(d,o(m));else{var y=Math.min(m.length,4);a.push("@@ -"+u+","+(p-u+y)+" +"+h+","+(f-h+y)+" @@"),a.push.apply(a,d),a.push.apply(a,o(m.slice(0,y))),m.length<=4&&s(a,_,g),u=0,h=0,d=[]}p+=m.length,f+=m.length}}return a.join("\n")+"\n"},applyPatch:function(e,t){for(var n=t.split("\n"),r=[],i=!1,o=!1,s="I"===n[0][0]?4:0;s<n.length;s++)if("@"===n[s][0]){var a=n[s].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);r.unshift({start:a[3],oldlength:a[2],oldlines:[],newlength:a[4],newlines:[]})}else"+"===n[s][0]?r[0].newlines.push(n[s].substr(1)):"-"===n[s][0]?r[0].oldlines.push(n[s].substr(1)):" "===n[s][0]?(r[0].newlines.push(n[s].substr(1)),r[0].oldlines.push(n[s].substr(1))):"\\"===n[s][0]&&("+"===n[s-1][0]?i=!0:"-"===n[s-1][0]&&(o=!0));for(var l=e.split("\n"),s=r.length-1;s>=0;s--){for(var c=r[s],u=0;u<c.oldlength;u++)if(l[c.start-1+u]!==c.oldlines[u])return!1;Array.prototype.splice.apply(l,[c.start-1,+c.oldlength].concat(c.newlines))}if(i)for(;!l[l.length-1];)l.pop();else o&&l.push("");return l.join("\n")},convertChangesToXML:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];i.added?t.push("<ins>"):i.removed&&t.push("<del>"),t.push(n(i.value)),i.added?t.push("</ins>"):i.removed&&t.push("</del>")}return t.join("")},convertChangesToDMP:function(e){for(var t,n=[],r=0;r<e.length;r++)t=e[r],n.push([t.added?1:t.removed?-1:0,t.value]);return n}}}();"undefined"!=typeof e&&(e.exports=r)}),e.register("browser/escape-string-regexp.js",function(e,t,n){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(r,"\\$&")}}),e.register("browser/events.js",function(e,t,n){function r(e){return"[object Array]"=={}.toString.call(e)}function i(){}t.EventEmitter=i,i.prototype.on=function(e,t){return this.$events||(this.$events={}),this.$events[e]?r(this.$events[e])?this.$events[e].push(t):this.$events[e]=[this.$events[e],t]:this.$events[e]=t,this},i.prototype.addListener=i.prototype.on,i.prototype.once=function(e,t){function n(){r.removeListener(e,n),t.apply(this,arguments)}var r=this;return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){if(this.$events&&this.$events[e]){var n=this.$events[e];if(r(n)){for(var i=-1,o=0,s=n.length;o<s;o++)if(n[o]===t||n[o].listener&&n[o].listener===t){i=o;break}if(i<0)return this;n.splice(i,1),n.length||delete this.$events[e]}else(n===t||n.listener&&n.listener===t)&&delete this.$events[e]}return this},i.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},i.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),r(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},i.prototype.emit=function(e){if(!this.$events)return!1;var t=this.$events[e];if(!t)return!1;var n=[].slice.call(arguments,1);if("function"==typeof t)t.apply(this,n);else{if(!r(t))return!1;for(var i=t.slice(),o=0,s=i.length;o<s;o++)i[o].apply(this,n)}return!0}}),e.register("browser/fs.js",function(e,t,n){}),e.register("browser/glob.js",function(e,t,n){}),e.register("browser/path.js",function(e,t,n){}),e.register("browser/progress.js",function(e,t,n){function r(){this.percent=0,this.size(0),this.fontSize(11),this.font("helvetica, arial, sans-serif")}e.exports=r,r.prototype.size=function(e){return this._size=e,this},r.prototype.text=function(e){return this._text=e,this},r.prototype.fontSize=function(e){return this._fontSize=e,this},r.prototype.font=function(e){return this._font=e,this},r.prototype.update=function(e){return this.percent=e,this},r.prototype.draw=function(e){try{var t=Math.min(this.percent,100),n=this._size,r=n/2,i=r,o=r,s=r-1,a=this._fontSize;e.font=a+"px "+this._font;var l=2*Math.PI*(t/100);e.clearRect(0,0,n,n),e.strokeStyle="#9f9f9f",e.beginPath(),e.arc(i,o,s,0,l,!1),e.stroke(),e.strokeStyle="#eee",e.beginPath(),e.arc(i,o,s-1,0,l,!0),e.stroke();var c=this._text||(0|t)+"%",u=e.measureText(c).width;e.fillText(c,i-u/2+1,o+a/2-1)}catch(h){}return this}}),e.register("browser/tty.js",function(e,t,r){t.isatty=function(){return!0},t.getWindowSize=function(){return"innerHeight"in n?[n.innerHeight,n.innerWidth]:[640,480]}}),e.register("context.js",function(e,t,n){function r(){}e.exports=r,r.prototype.runnable=function(e){return 0==arguments.length?this._runnable:(this.test=this._runnable=e,this)},r.prototype.timeout=function(e){return 0===arguments.length?this.runnable().timeout():(this.runnable().timeout(e),this)},r.prototype.enableTimeouts=function(e){return this.runnable().enableTimeouts(e),this},r.prototype.slow=function(e){return this.runnable().slow(e),this},r.prototype.inspect=function(){return JSON.stringify(this,function(e,t){if("_runnable"!=e&&"test"!=e)return t},2)}}),e.register("hook.js",function(e,t,n){function r(e,t){o.call(this,e,t),this.type="hook"}function i(){}var o=n("./runnable");e.exports=r,i.prototype=o.prototype,r.prototype=new i,r.prototype.constructor=r,r.prototype.error=function(e){if(0==arguments.length){var e=this._error;return this._error=null,e}this._error=e}}),e.register("interfaces/bdd.js",function(e,t,n){var r=n("../suite"),i=n("../test"),o=(n("../utils"),n("browser/escape-string-regexp"));e.exports=function(e){var t=[e];e.on("pre-require",function(e,n,s){e.before=function(e,n){t[0].beforeAll(e,n)},e.after=function(e,n){t[0].afterAll(e,n)},e.beforeEach=function(e,n){t[0].beforeEach(e,n)},e.afterEach=function(e,n){t[0].afterEach(e,n)},e.describe=e.context=function(e,i){var o=r.create(t[0],e);return o.file=n,t.unshift(o),i.call(o),t.shift(),o},e.xdescribe=e.xcontext=e.describe.skip=function(e,n){var i=r.create(t[0],e);i.pending=!0,t.unshift(i),n.call(i),t.shift()},e.describe.only=function(t,n){var r=e.describe(t,n);return s.grep(r.fullTitle()),r},e.it=e.specify=function(e,r){var o=t[0];o.pending&&(r=null);var s=new i(e,r);return s.file=n,o.addTest(s),s},e.it.only=function(t,n){var r=e.it(t,n),i="^"+o(r.fullTitle())+"$";return s.grep(new RegExp(i)),r},e.xit=e.xspecify=e.it.skip=function(t){e.it(t)}})}}),e.register("interfaces/exports.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){function t(e,o){var s;for(var a in e)if("function"==typeof e[a]){var l=e[a];switch(a){case"before":n[0].beforeAll(l);break;case"after":n[0].afterAll(l);break;case"beforeEach":n[0].beforeEach(l);break;case"afterEach":n[0].afterEach(l);break;default:var c=new i(a,l);c.file=o,n[0].addTest(c)}}else s=r.create(n[0],a),n.unshift(s),t(e[a]),n.shift()}var n=[e];e.on("require",t)}}),e.register("interfaces/index.js",function(e,t,n){t.bdd=n("./bdd"),t.tdd=n("./tdd"),t.qunit=n("./qunit"),t.exports=n("./exports")}),e.register("interfaces/qunit.js",function(e,t,n){var r=n("../suite"),i=n("../test"),o=n("browser/escape-string-regexp");n("../utils");e.exports=function(e){var t=[e];e.on("pre-require",function(e,n,s){e.before=function(e,n){t[0].beforeAll(e,n)},e.after=function(e,n){t[0].afterAll(e,n)},e.beforeEach=function(e,n){t[0].beforeEach(e,n)},e.afterEach=function(e,n){t[0].afterEach(e,n)},e.suite=function(e){t.length>1&&t.shift();var i=r.create(t[0],e);return i.file=n,t.unshift(i),i},e.suite.only=function(t,n){var r=e.suite(t,n);s.grep(r.fullTitle())},e.test=function(e,r){var o=new i(e,r);return o.file=n,t[0].addTest(o),o},e.test.only=function(t,n){var r=e.test(t,n),i="^"+o(r.fullTitle())+"$";s.grep(new RegExp(i))},e.test.skip=function(t){e.test(t)}})}}),e.register("interfaces/tdd.js",function(e,t,n){var r=n("../suite"),i=n("../test"),o=n("browser/escape-string-regexp");n("../utils");e.exports=function(e){var t=[e];e.on("pre-require",function(e,n,s){e.setup=function(e,n){t[0].beforeEach(e,n)},e.teardown=function(e,n){t[0].afterEach(e,n)},e.suiteSetup=function(e,n){t[0].beforeAll(e,n)},e.suiteTeardown=function(e,n){t[0].afterAll(e,n)},e.suite=function(e,i){var o=r.create(t[0],e);return o.file=n,t.unshift(o),i.call(o),t.shift(),o},e.suite.skip=function(e,n){var i=r.create(t[0],e);i.pending=!0,t.unshift(i),n.call(i),t.shift()},e.suite.only=function(t,n){var r=e.suite(t,n);s.grep(r.fullTitle())},e.test=function(e,r){var o=t[0];o.pending&&(r=null);var s=new i(e,r);return s.file=n,o.addTest(s),s},e.test.only=function(t,n){var r=e.test(t,n),i="^"+o(r.fullTitle())+"$";s.grep(new RegExp(i))},e.test.skip=function(t){e.test(t)}})}}),e.register("mocha.js",function(e,t,r){function i(e){return __dirname+"/../images/"+e+".png"}function s(e){e=e||{},this.files=[],this.options=e,this.grep(e.grep),this.suite=new t.Suite("",new t.Context),this.ui(e.ui),this.bail(e.bail),this.reporter(e.reporter,e.reporterOptions),null!=e.timeout&&this.timeout(e.timeout),this.useColors(e.useColors),null!==e.enableTimeouts&&this.enableTimeouts(e.enableTimeouts),e.slow&&this.slow(e.slow),this.suite.on("pre-require",function(e){t.afterEach=e.afterEach||e.teardown,t.after=e.after||e.suiteTeardown,t.beforeEach=e.beforeEach||e.setup,t.before=e.before||e.suiteSetup,t.describe=e.describe||e.suite,t.it=e.it||e.test,t.setup=e.setup||e.beforeEach,t.suiteSetup=e.suiteSetup||e.before,t.suiteTeardown=e.suiteTeardown||e.after,t.suite=e.suite||e.describe,t.teardown=e.teardown||e.afterEach,t.test=e.test||e.it})}var a=r("browser/path"),l=r("browser/escape-string-regexp"),c=r("./utils");if(t=e.exports=s,"undefined"!=typeof o&&"function"==typeof o.cwd){var u=a.join,h=o.cwd();e.paths.push(h,u(h,"node_modules"))}t.utils=c,t.interfaces=r("./interfaces"),t.reporters=r("./reporters"),t.Runnable=r("./runnable"),t.Context=r("./context"),t.Runner=r("./runner"),t.Suite=r("./suite"),t.Hook=r("./hook"),t.Test=r("./test"),s.prototype.bail=function(e){return 0==arguments.length&&(e=!0),this.suite.bail(e),this},s.prototype.addFile=function(e){return this.files.push(e),this},s.prototype.reporter=function(e,t){if("function"==typeof e)this._reporter=e;else{e=e||"spec";var n;try{n=r("./reporters/"+e)}catch(i){}if(!n)try{n=r(e)}catch(i){}if(n||"teamcity"!==e||console.warn("The Teamcity reporter was moved to a package named mocha-teamcity-reporter (https://npmjs.org/package/mocha-teamcity-reporter)."),!n)throw new Error('invalid reporter "'+e+'"');this._reporter=n}return this.options.reporterOptions=t,this},s.prototype.ui=function(e){if(e=e||"bdd",this._ui=t.interfaces[e],!this._ui)try{this._ui=r(e)}catch(n){}if(!this._ui)throw new Error('invalid interface "'+e+'"');return this._ui=this._ui(this.suite),this},s.prototype.loadFiles=function(e){var t=this,i=this.suite,o=this.files.length;this.files.forEach(function(s){s=a.resolve(s),i.emit("pre-require",n,s,t),i.emit("require",r(s),s,t),i.emit("post-require",n,s,t),--o||e&&e()})},s.prototype._growl=function(e,t){var n=r("growl");e.on("end",function(){var r=t.stats;if(r.failures){var o=r.failures+" of "+e.total+" tests failed";n(o,{name:"mocha",title:"Failed",image:i("error")})}else n(r.passes+" tests passed in "+r.duration+"ms",{name:"mocha",title:"Passed",image:i("ok")})})},s.prototype.grep=function(e){return this.options.grep="string"==typeof e?new RegExp(l(e)):e,this},s.prototype.invert=function(){return this.options.invert=!0,this},s.prototype.ignoreLeaks=function(e){return this.options.ignoreLeaks=!!e,this},s.prototype.checkLeaks=function(){return this.options.ignoreLeaks=!1,this},s.prototype.growl=function(){return this.options.growl=!0,this},s.prototype.globals=function(e){return this.options.globals=(this.options.globals||[]).concat(e),this},s.prototype.useColors=function(e){return void 0!==e&&(this.options.useColors=e),this},s.prototype.useInlineDiffs=function(e){return this.options.useInlineDiffs=!(!arguments.length||void 0==e)&&e,this},s.prototype.timeout=function(e){return this.suite.timeout(e),this},s.prototype.slow=function(e){return this.suite.slow(e),this},s.prototype.enableTimeouts=function(e){return this.suite.enableTimeouts(!arguments.length||void 0===e||e),this},s.prototype.asyncOnly=function(){return this.options.asyncOnly=!0,this},s.prototype.noHighlighting=function(){return this.options.noHighlighting=!0,this},s.prototype.run=function(e){function n(t){s.done?s.done(t,e):e(t)}this.files.length&&this.loadFiles();var r=this.suite,i=this.options;i.files=this.files;var o=new t.Runner(r),s=new this._reporter(o,i);return o.ignoreLeaks=!1!==i.ignoreLeaks,o.asyncOnly=i.asyncOnly,i.grep&&o.grep(i.grep,i.invert),i.globals&&o.globals(i.globals),i.growl&&this._growl(o,s),void 0!==i.useColors&&(t.reporters.Base.useColors=i.useColors),t.reporters.Base.inlineDiffs=i.useInlineDiffs,o.run(n)}}),e.register("ms.js",function(e,t,n){function r(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"y":return n*h;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"h":return n*c;case"minutes":case"minute":case"m":return n*l;case"seconds":case"second":case"s":return n*a;case"ms":return n}}}function i(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=l?Math.round(e/l)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return s(e,u,"day")||s(e,c,"hour")||s(e,l,"minute")||s(e,a,"second")||e+" ms"}function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,l=60*a,c=60*l,u=24*c,h=365.25*u;e.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?o(e):i(e)}}),e.register("reporters/base.js",function(e,t,r){function i(e){var t=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},n=this.failures=[];e&&(this.runner=e,e.stats=t,e.on("start",function(){t.start=new m}),e.on("suite",function(e){t.suites=t.suites||0,e.root||t.suites++}),e.on("test end",function(e){t.tests=t.tests||0,t.tests++}),e.on("pass",function(e){t.passes=t.passes||0;var n=e.slow()/2;e.speed=e.duration>e.slow()?"slow":e.duration>n?"medium":"fast",t.passes++}),e.on("fail",function(e,r){t.failures=t.failures||0,t.failures++,e.err=r,n.push(e)}),e.on("end",function(){t.end=new m,t.duration=new m-t.start}),e.on("pending",function(){t.pending++}))}function s(e,t){return e=String(e),Array(t-e.length+1).join(" ")+e}function a(e,t){var n=c(e,"WordsWithSpace",t),r=n.split("\n");if(r.length>4){var i=String(r.length).length;n=r.map(function(e,t){return s(++t,i)+" | "+e}).join("\n")}return n="\n"+y("diff removed","actual")+" "+y("diff added","expected")+"\n\n"+n+"\n",n=n.replace(/^/gm,"      ")}function l(e,t){function n(e){return t&&(e=u(e)),"+"===e[0]?i+h("diff added",e):"-"===e[0]?i+h("diff removed",e):e.match(/\@\@/)?null:e.match(/\\ No newline/)?null:i+e}function r(e){return null!=e}var i="      ";msg=f.createPatch("string",e.actual,e.expected);var o=msg.split("\n").splice(4);return"\n      "+h("diff added","+ expected")+" "+h("diff removed","- actual")+"\n\n"+o.map(n).filter(r).join("\n")}function c(e,t,n){var r=n?u(e.actual):e.actual,i=n?u(e.expected):e.expected;return f["diff"+t](r,i).map(function(e){return e.added?h("diff added",e.value):e.removed?h("diff removed",e.value):e.value}).join("")}function u(e){return e.replace(/\t/g,"<tab>").replace(/\r/g,"<CR>").replace(/\n/g,"<LF>\n")}function h(e,t){return t.split("\n").map(function(t){return y(e,t)}).join("\n")}function d(e,t){return e=Object.prototype.toString.call(e),t=Object.prototype.toString.call(t),e==t}var p=r("browser/tty"),f=r("browser/diff"),_=r("../ms"),g=r("../utils"),m=n.Date,v=(n.setTimeout,n.setInterval,n.clearTimeout,n.clearInterval,p.isatty(1)&&p.isatty(2));t=e.exports=i,t.useColors=v||void 0!==o.env.MOCHA_COLORS,t.inlineDiffs=!1,t.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41},t.symbols={ok:"✓",err:"✖",dot:"․"},"win32"==o.platform&&(t.symbols.ok="√",t.symbols.err="×",t.symbols.dot=".");var y=t.color=function(e,n){return t.useColors?"["+t.colors[e]+"m"+n+"[0m":String(n)};t.window={width:v?o.stdout.getWindowSize?o.stdout.getWindowSize(1)[0]:p.getWindowSize()[1]:75},t.cursor={hide:function(){v&&o.stdout.write("[?25l")},show:function(){v&&o.stdout.write("[?25h")},deleteLine:function(){v&&o.stdout.write("[2K")},beginningOfLine:function(){v&&o.stdout.write("[0G")},CR:function(){v?(t.cursor.deleteLine(),t.cursor.beginningOfLine()):o.stdout.write("\r")}},t.list=function(e){console.log(),e.forEach(function(e,n){var r=y("error title","  %s) %s:\n")+y("error message","     %s")+y("error stack","\n%s\n"),i=e.err,o=i.message||"",s=i.stack||o,c=s.indexOf(o)+o.length,u=s.slice(0,c),h=i.actual,p=i.expected,f=!0;if(i.uncaught&&(u="Uncaught "+u),i.showDiff&&d(h,p)){"string"!=typeof h&&(f=!1,i.actual=h=g.stringify(h),i.expected=p=g.stringify(p)),r=y("error title","  %s) %s:\n%s")+y("error stack","\n%s\n");var _=o.match(/^([^:]+): expected/);u="\n      "+y("error message",_?_[1]:u),u+=t.inlineDiffs?a(i,f):l(i,f)}s=s.slice(c?c+1:c).replace(/^/gm,"  "),console.log(r,n+1,e.fullTitle(),u,s)})},i.prototype.epilogue=function(){var e,t=this.stats;console.log(),e=y("bright pass"," ")+y("green"," %d passing")+y("light"," (%s)"),console.log(e,t.passes||0,_(t.duration)),t.pending&&(e=y("pending"," ")+y("pending"," %d pending"),console.log(e,t.pending)),t.failures&&(e=y("fail","  %d failing"),console.log(e,t.failures),i.list(this.failures),console.log()),console.log()}}),e.register("reporters/doc.js",function(e,t,n){function r(e){function t(){return Array(n).join("  ")}i.call(this,e);var n=(this.stats,e.total,2);e.on("suite",function(e){e.root||(++n,console.log('%s<section class="suite">',t()),++n,console.log("%s<h1>%s</h1>",t(),o.escape(e.title)),console.log("%s<dl>",t()))}),e.on("suite end",function(e){e.root||(console.log("%s</dl>",t()),--n,console.log("%s</section>",t()),--n)}),e.on("pass",function(e){console.log("%s  <dt>%s</dt>",t(),o.escape(e.title));var n=o.escape(o.clean(e.fn.toString()));console.log("%s  <dd><pre><code>%s</code></pre></dd>",t(),n)}),e.on("fail",function(e,n){console.log('%s  <dt class="error">%s</dt>',t(),o.escape(e.title));var r=o.escape(o.clean(e.fn.toString()));console.log('%s  <dd class="error"><pre><code>%s</code></pre></dd>',t(),r),console.log('%s  <dd class="error">%s</dd>',t(),o.escape(n))})}var i=n("./base"),o=n("../utils");t=e.exports=r}),e.register("reporters/dot.js",function(e,t,n){function r(e){s.call(this,e);var t=this,n=(this.stats,.75*s.window.width|0),r=-1;e.on("start",function(){o.stdout.write("\n  ")}),e.on("pending",function(e){++r%n==0&&o.stdout.write("\n  "),o.stdout.write(a("pending",s.symbols.dot))}),e.on("pass",function(e){++r%n==0&&o.stdout.write("\n  "),"slow"==e.speed?o.stdout.write(a("bright yellow",s.symbols.dot)):o.stdout.write(a(e.speed,s.symbols.dot))}),e.on("fail",function(e,t){++r%n==0&&o.stdout.write("\n  "),o.stdout.write(a("fail",s.symbols.dot))}),e.on("end",function(){console.log(),t.epilogue()})}function i(){}var s=n("./base"),a=s.color;t=e.exports=r,i.prototype=s.prototype,r.prototype=new i,r.prototype.constructor=r}),e.register("reporters/html-cov.js",function(e,t,n){function r(e){var t=n("jade"),r=__dirname+"/templates/coverage.jade",l=a.readFileSync(r,"utf8"),c=t.compile(l,{filename:r}),u=this;s.call(this,e,!1),e.on("end",function(){o.stdout.write(c({cov:u.cov,coverageClass:i}))})}function i(e){return e>=75?"high":e>=50?"medium":e>=25?"low":"terrible"}var s=n("./json-cov"),a=n("browser/fs");t=e.exports=r}),e.register("reporters/html.js",function(e,t,r){function i(e){h.call(this,e);var t,n,r=this,i=this.stats,m=(e.total,s(g)),v=m.getElementsByTagName("li"),y=v[1].getElementsByTagName("em")[0],b=v[1].getElementsByTagName("a")[0],T=v[2].getElementsByTagName("em")[0],k=v[2].getElementsByTagName("a")[0],w=v[3].getElementsByTagName("em")[0],x=m.getElementsByTagName("canvas")[0],S=s('<ul id="mocha-report"></ul>'),C=[S],F=document.getElementById("mocha");if(x.getContext){var E=window.devicePixelRatio||1;x.style.width=x.width,x.style.height=x.height,x.width*=E,x.height*=E,n=x.getContext("2d"),n.scale(E,E),t=new p}return F?(u(b,"click",function(){l();var e=/pass/.test(S.className)?"":" pass";S.className=S.className.replace(/fail|pass/g,"")+e,S.className.trim()&&a("test pass")}),u(k,"click",function(){l();var e=/fail/.test(S.className)?"":" fail";S.className=S.className.replace(/fail|pass/g,"")+e,S.className.trim()&&a("test fail")}),F.appendChild(m),F.appendChild(S),t&&t.size(40),e.on("suite",function(e){if(!e.root){var t=r.suiteURL(e),n=s('<li class="suite"><h1><a href="%s">%s</a></h1></li>',t,f(e.title));C[0].appendChild(n),C.unshift(document.createElement("ul")),n.appendChild(C[0])}}),e.on("suite end",function(e){e.root||C.shift()}),e.on("fail",function(t,n){"hook"==t.type&&e.emit("test end",t)}),void e.on("test end",function(e){var o=i.tests/this.total*100|0;t&&t.update(o).draw(n);var a=new _-i.start;if(c(y,i.passes),c(T,i.failures),c(w,(a/1e3).toFixed(2)),"passed"==e.state)var l=r.testURL(e),h=s('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="%s" class="replay">‣</a></h2></li>',e.speed,e.title,e.duration,l);else if(e.pending)var h=s('<li class="test pass pending"><h2>%e</h2></li>',e.title);else{var h=s('<li class="test fail"><h2>%e <a href="%e" class="replay">‣</a></h2></li>',e.title,r.testURL(e)),p=e.err.stack||e.err.toString();~p.indexOf(e.err.message)||(p=e.err.message+"\n"+p),"[object Error]"==p&&(p=e.err.message),!e.err.stack&&e.err.sourceURL&&void 0!==e.err.line&&(p+="\n("+e.err.sourceURL+":"+e.err.line+")"),h.appendChild(s('<pre class="error">%e</pre>',p))}if(!e.pending){var f=h.getElementsByTagName("h2")[0];u(f,"click",function(){g.style.display="none"==g.style.display?"block":"none"});var g=s("<pre><code>%e</code></pre>",d.clean(e.fn.toString()));h.appendChild(g),g.style.display="none"}C[0]&&C[0].appendChild(h)})):o("#mocha div missing, add it to your document")}function o(e){document.body.appendChild(s('<div id="mocha-error">%s</div>',e))}function s(e){var t=arguments,n=document.createElement("div"),r=1;return n.innerHTML=e.replace(/%([se])/g,function(e,n){switch(n){case"s":return String(t[r++]);case"e":return f(t[r++])}}),n.firstChild}function a(e){for(var t=document.getElementsByClassName("suite"),n=0;n<t.length;n++){var r=t[n].getElementsByClassName(e);0==r.length&&(t[n].className+=" hidden")}}function l(){for(var e=document.getElementsByClassName("suite hidden"),t=0;t<e.length;++t)e[t].className=e[t].className.replace("suite hidden","suite")}function c(e,t){e.textContent?e.textContent=t:e.innerText=t}function u(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}var h=r("./base"),d=r("../utils"),p=r("../browser/progress"),f=d.escape,_=n.Date;n.setTimeout,n.setInterval,n.clearTimeout,n.clearInterval;t=e.exports=i;var g='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="#">passes:</a> <em>0</em></li><li class="failures"><a href="#">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>',m=function(e){var t=window.location.search;return window.location.pathname+(t?t+"&":"?")+"grep="+encodeURIComponent(e)};i.prototype.suiteURL=function(e){return m(e.fullTitle())},i.prototype.testURL=function(e){return m(e.fullTitle())}}),e.register("reporters/index.js",function(e,t,n){t.Base=n("./base"),t.Dot=n("./dot"),t.Doc=n("./doc"),t.TAP=n("./tap"),t.JSON=n("./json"),t.HTML=n("./html"),t.List=n("./list"),t.Min=n("./min"),t.Spec=n("./spec"),t.Nyan=n("./nyan"),t.XUnit=n("./xunit"),t.Markdown=n("./markdown"),t.Progress=n("./progress"),t.Landing=n("./landing"),t.JSONCov=n("./json-cov"),t.HTMLCov=n("./html-cov"),t.JSONStream=n("./json-stream")}),e.register("reporters/json-cov.js",function(e,t,r){function i(e,t){var r=this,t=1==arguments.length||t;c.call(this,e);var i=[],a=[],u=[];e.on("test end",function(e){i.push(e)}),e.on("pass",function(e){u.push(e)}),e.on("fail",function(e){a.push(e)}),e.on("end",function(){var e=n._$jscoverage||{},c=r.cov=s(e);c.stats=r.stats,c.tests=i.map(l),c.failures=a.map(l),c.passes=u.map(l),t&&o.stdout.write(JSON.stringify(c,null,2))})}function s(e){var t={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var n in e){var r=a(n,e[n]);t.files.push(r),t.hits+=r.hits,t.misses+=r.misses,t.sloc+=r.sloc}return t.files.sort(function(e,t){return e.filename.localeCompare(t.filename)}),t.sloc>0&&(t.coverage=t.hits/t.sloc*100),t}function a(e,t){var n={filename:e,coverage:0,hits:0,misses:0,sloc:0,source:{}};return t.source.forEach(function(e,r){r++,0===t[r]?(n.misses++,n.sloc++):void 0!==t[r]&&(n.hits++,n.sloc++),n.source[r]={source:e,coverage:void 0===t[r]?"":t[r]}}),n.coverage=n.hits/n.sloc*100,n}function l(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var c=r("./base");t=e.exports=i}),e.register("reporters/json-stream.js",function(e,t,n){function r(e){s.call(this,e);var t=this,n=(this.stats,e.total);e.on("start",function(){console.log(JSON.stringify(["start",{total:n}]))}),e.on("pass",function(e){console.log(JSON.stringify(["pass",i(e)]))}),e.on("fail",function(e,t){e=i(e),e.err=t.message,console.log(JSON.stringify(["fail",e]))}),e.on("end",function(){o.stdout.write(JSON.stringify(["end",t.stats]))})}function i(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var s=n("./base");s.color;t=e.exports=r}),e.register("reporters/json.js",function(e,t,n){function r(e){var t=this;a.call(this,e);var n=[],r=[],s=[],l=[];e.on("test end",function(e){n.push(e)}),e.on("pass",function(e){l.push(e)}),e.on("fail",function(e){s.push(e)}),e.on("pending",function(e){r.push(e)}),e.on("end",function(){var a={stats:t.stats,tests:n.map(i),pending:r.map(i),failures:s.map(i),passes:l.map(i)};e.testResults=a,o.stdout.write(JSON.stringify(a,null,2))})}function i(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration,err:s(e.err||{})}}function s(e){var t={};return Object.getOwnPropertyNames(e).forEach(function(n){t[n]=e[n]},e),t}var a=n("./base");a.cursor,a.color;t=e.exports=r}),e.register("reporters/landing.js",function(e,t,n){function r(e){function t(){var e=Array(r).join("-");return"  "+l("runway",e)}s.call(this,e);var n=this,r=(this.stats,.75*s.window.width|0),i=e.total,c=o.stdout,u=l("plane","✈"),h=-1,d=0;e.on("start",function(){c.write("\n\n\n  "),a.hide()}),e.on("test end",function(e){var n=-1==h?r*++d/i|0:h;"failed"==e.state&&(u=l("plane crash","✈"),h=n),c.write("["+(r+1)+"D[2A"),c.write(t()),c.write("\n  "),c.write(l("runway",Array(n).join("⋅"))),c.write(u),c.write(l("runway",Array(r-n).join("⋅")+"\n")),c.write(t()),c.write("[0m")}),e.on("end",function(){a.show(),console.log(),n.epilogue()})}function i(){}var s=n("./base"),a=s.cursor,l=s.color;t=e.exports=r,s.colors.plane=0,s.colors["plane crash"]=31,s.colors.runway=90,i.prototype=s.prototype,r.prototype=new i,r.prototype.constructor=r}),e.register("reporters/list.js",function(e,t,n){function r(e){s.call(this,e);var t=this,n=(this.stats,0);e.on("start",function(){console.log()}),e.on("test",function(e){o.stdout.write(l("pass","    "+e.fullTitle()+": "))}),e.on("pending",function(e){var t=l("checkmark","  -")+l("pending"," %s");console.log(t,e.fullTitle())}),e.on("pass",function(e){var t=l("checkmark","  "+s.symbols.dot)+l("pass"," %s: ")+l(e.speed,"%dms");a.CR(),console.log(t,e.fullTitle(),e.duration)}),e.on("fail",function(e,t){a.CR(),console.log(l("fail","  %d) %s"),++n,e.fullTitle())}),e.on("end",t.epilogue.bind(t))}function i(){}var s=n("./base"),a=s.cursor,l=s.color;t=e.exports=r,i.prototype=s.prototype,r.prototype=new i,r.prototype.constructor=r}),e.register("reporters/markdown.js",function(e,t,n){function r(e){function t(e){return Array(c).join("#")+" "+e}function n(e,t){var r=t,i=a+e.title;return t=t[i]=t[i]||{suite:e},e.suites.forEach(function(e){n(e,t)}),r}function r(e,t){++t;var n,i="";for(var o in e)"suite"!=o&&(o!==a&&(n=" - ["+o.substring(1)+"]",n+="(#"+s.slug(e[o].suite.fullTitle())+")\n",i+=Array(t).join("  ")+n),i+=r(e[o],t));return i}function l(e){var t=n(e,{});return r(t,0)}i.call(this,e);var c=(this.stats,0),u="";
l(e.suite),e.on("suite",function(e){++c;var n=s.slug(e.fullTitle());u+='<a name="'+n+'"></a>\n',u+=t(e.title)+"\n"}),e.on("suite end",function(e){--c}),e.on("pass",function(e){var t=s.clean(e.fn.toString());u+=e.title+".\n",u+="\n```js\n",u+=t+"\n",u+="```\n\n"}),e.on("end",function(){o.stdout.write("# TOC\n"),o.stdout.write(l(e.suite)),o.stdout.write(u)})}var i=n("./base"),s=n("../utils"),a="$";t=e.exports=r}),e.register("reporters/min.js",function(e,t,n){function r(e){s.call(this,e),e.on("start",function(){o.stdout.write("[2J"),o.stdout.write("[1;3H")}),e.on("end",this.epilogue.bind(this))}function i(){}var s=n("./base");t=e.exports=r,i.prototype=s.prototype,r.prototype=new i,r.prototype.constructor=r}),e.register("reporters/nyan.js",function(e,t,n){function r(e){a.call(this,e);var t=this,n=(this.stats,.75*a.window.width|0),r=(this.rainbowColors=t.generateColors(),this.colorIndex=0,this.numberOfLines=4,this.trajectories=[[],[],[],[]],this.nyanCatWidth=11);this.trajectoryWidthMax=n-r,this.scoreboardWidth=5,this.tick=0;e.on("start",function(){a.cursor.hide(),t.draw()}),e.on("pending",function(e){t.draw()}),e.on("pass",function(e){t.draw()}),e.on("fail",function(e,n){t.draw()}),e.on("end",function(){a.cursor.show();for(var e=0;e<t.numberOfLines;e++)i("\n");t.epilogue()})}function i(e){o.stdout.write(e)}function s(){}var a=n("./base");t=e.exports=r,r.prototype.draw=function(){this.appendRainbow(),this.drawScoreboard(),this.drawRainbow(),this.drawNyanCat(),this.tick=!this.tick},r.prototype.drawScoreboard=function(){function e(e,t){i(" "),i(a.color(e,t)),i("\n")}var t=this.stats;e("green",t.passes),e("fail",t.failures),e("pending",t.pending),i("\n"),this.cursorUp(this.numberOfLines)},r.prototype.appendRainbow=function(){for(var e=this.tick?"_":"-",t=this.rainbowify(e),n=0;n<this.numberOfLines;n++){var r=this.trajectories[n];r.length>=this.trajectoryWidthMax&&r.shift(),r.push(t)}},r.prototype.drawRainbow=function(){var e=this;this.trajectories.forEach(function(t,n){i("["+e.scoreboardWidth+"C"),i(t.join("")),i("\n")}),this.cursorUp(this.numberOfLines)},r.prototype.drawNyanCat=function(){var e=this,t=this.scoreboardWidth+this.trajectories[0].length,n="["+t+"C",r="";i(n),i("_,------,"),i("\n"),i(n),r=e.tick?"  ":"   ",i("_|"+r+"/\\_/\\ "),i("\n"),i(n),r=e.tick?"_":"__";var o=e.tick?"~":"^";i(o+"|"+r+this.face()+" "),i("\n"),i(n),r=e.tick?" ":"  ",i(r+'""  "" '),i("\n"),this.cursorUp(this.numberOfLines)},r.prototype.face=function(){var e=this.stats;return e.failures?"( x .x)":e.pending?"( o .o)":e.passes?"( ^ .^)":"( - .-)"},r.prototype.cursorUp=function(e){i("["+e+"A")},r.prototype.cursorDown=function(e){i("["+e+"B")},r.prototype.generateColors=function(){for(var e=[],t=0;t<42;t++){var n=Math.floor(Math.PI/3),r=t*(1/6),i=Math.floor(3*Math.sin(r)+3),o=Math.floor(3*Math.sin(r+2*n)+3),s=Math.floor(3*Math.sin(r+4*n)+3);e.push(36*i+6*o+s+16)}return e},r.prototype.rainbowify=function(e){if(!a.useColors)return e;var t=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"[38;5;"+t+"m"+e+"[0m"},s.prototype=a.prototype,r.prototype=new s,r.prototype.constructor=r}),e.register("reporters/progress.js",function(e,t,n){function r(e,t){s.call(this,e);var n=this,t=t||{},r=(this.stats,.5*s.window.width|0),i=e.total,c=0,u=(Math.max,-1);t.open=t.open||"[",t.complete=t.complete||"▬",t.incomplete=t.incomplete||s.symbols.dot,t.close=t.close||"]",t.verbose=!1,e.on("start",function(){console.log(),a.hide()}),e.on("test end",function(){c++;var e=c/i,n=r*e|0,s=r-n;(u!==n||t.verbose)&&(u=n,a.CR(),o.stdout.write("[J"),o.stdout.write(l("progress","  "+t.open)),o.stdout.write(Array(n).join(t.complete)),o.stdout.write(Array(s).join(t.incomplete)),o.stdout.write(l("progress",t.close)),t.verbose&&o.stdout.write(l("progress"," "+c+" of "+i)))}),e.on("end",function(){a.show(),console.log(),n.epilogue()})}function i(){}var s=n("./base"),a=s.cursor,l=s.color;t=e.exports=r,s.colors.progress=90,i.prototype=s.prototype,r.prototype=new i,r.prototype.constructor=r}),e.register("reporters/spec.js",function(e,t,n){function r(e){function t(){return Array(r).join("  ")}o.call(this,e);var n=this,r=(this.stats,0),i=0;e.on("start",function(){console.log()}),e.on("suite",function(e){++r,console.log(a("suite","%s%s"),t(),e.title)}),e.on("suite end",function(e){--r,1==r&&console.log()}),e.on("pending",function(e){var n=t()+a("pending","  - %s");console.log(n,e.title)}),e.on("pass",function(e){if("fast"==e.speed){var n=t()+a("checkmark","  "+o.symbols.ok)+a("pass"," %s ");s.CR(),console.log(n,e.title)}else{var n=t()+a("checkmark","  "+o.symbols.ok)+a("pass"," %s ")+a(e.speed,"(%dms)");s.CR(),console.log(n,e.title,e.duration)}}),e.on("fail",function(e,n){s.CR(),console.log(t()+a("fail","  %d) %s"),++i,e.title)}),e.on("end",n.epilogue.bind(n))}function i(){}var o=n("./base"),s=o.cursor,a=o.color;t=e.exports=r,i.prototype=o.prototype,r.prototype=new i,r.prototype.constructor=r}),e.register("reporters/tap.js",function(e,t,n){function r(e){o.call(this,e);var t=(this.stats,1),n=0,r=0;e.on("start",function(){var t=e.grepTotal(e.suite);console.log("%d..%d",1,t)}),e.on("test end",function(){++t}),e.on("pending",function(e){console.log("ok %d %s # SKIP -",t,i(e))}),e.on("pass",function(e){n++,console.log("ok %d %s",t,i(e))}),e.on("fail",function(e,n){r++,console.log("not ok %d %s",t,i(e)),n.stack&&console.log(n.stack.replace(/^/gm,"  "))}),e.on("end",function(){console.log("# tests "+(n+r)),console.log("# pass "+n),console.log("# fail "+r)})}function i(e){return e.fullTitle().replace(/#/g,"")}var o=n("./base");o.cursor,o.color;t=e.exports=r}),e.register("reporters/xunit.js",function(e,t,r){function i(e,t){l.call(this,e);var n=this.stats,r=[],i=this;if(t.reporterOptions&&t.reporterOptions.output){if(!u.createWriteStream)throw new Error("file output not supported in browser");i.fileStream=u.createWriteStream(t.reporterOptions.output)}e.on("pending",function(e){r.push(e)}),e.on("pass",function(e){r.push(e)}),e.on("fail",function(e){r.push(e)}),e.on("end",function(){i.write(s("testsuite",{name:"Mocha Tests",tests:n.tests,failures:n.failures,errors:n.failures,skipped:n.tests-n.failures-n.passes,timestamp:(new d).toUTCString(),time:n.duration/1e3||0},!1)),r.forEach(function(e){i.test(e)}),i.write("</testsuite>")})}function o(){}function s(e,t,n,r){var i,o=n?"/>":">",s=[];for(var a in t)s.push(a+'="'+h(t[a])+'"');return i="<"+e+(s.length?" "+s.join(" "):"")+o,r&&(i+=r+"</"+e+o),i}function a(e){return"<![CDATA["+h(e)+"]]>"}var l=r("./base"),c=r("../utils"),u=r("browser/fs"),h=c.escape,d=n.Date;n.setTimeout,n.setInterval,n.clearTimeout,n.clearInterval;t=e.exports=i,i.prototype.done=function(e,t){this.fileStream?this.fileStream.end(function(){t(e)}):t(e)},o.prototype=l.prototype,i.prototype=new o,i.prototype.constructor=i,i.prototype.write=function(e){this.fileStream?this.fileStream.write(e+"\n"):console.log(e)},i.prototype.test=function(e,t){var n={classname:e.parent.fullTitle(),name:e.title,time:e.duration/1e3||0};if("failed"==e.state){var r=e.err;this.write(s("testcase",n,!1,s("failure",{},!1,a(h(r.message)+"\n"+r.stack))))}else e.pending?this.write(s("testcase",n,!1,s("skipped",{},!0))):this.write(s("testcase",n,!0))}}),e.register("runnable.js",function(e,t,r){function i(e,t){this.title=e,this.fn=t,this.async=t&&t.length,this.sync=!this.async,this._timeout=2e3,this._slow=75,this._enableTimeouts=!0,this.timedOut=!1,this._trace=new Error("done() called multiple times")}function o(){}var s=r("browser/events").EventEmitter,a=r("browser/debug")("mocha:runnable"),l=r("./ms"),c=r("./utils"),u=n.Date,h=n.setTimeout,d=(n.setInterval,n.clearTimeout),p=(n.clearInterval,Object.prototype.toString);e.exports=i,o.prototype=s.prototype,i.prototype=new o,i.prototype.constructor=i,i.prototype.timeout=function(e){return 0==arguments.length?this._timeout:(0===e&&(this._enableTimeouts=!1),"string"==typeof e&&(e=l(e)),a("timeout %d",e),this._timeout=e,this.timer&&this.resetTimeout(),this)},i.prototype.slow=function(e){return 0===arguments.length?this._slow:("string"==typeof e&&(e=l(e)),a("timeout %d",e),this._slow=e,this)},i.prototype.enableTimeouts=function(e){return 0===arguments.length?this._enableTimeouts:(a("enableTimeouts %s",e),this._enableTimeouts=e,this)},i.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title},i.prototype.clearTimeout=function(){d(this.timer)},i.prototype.inspect=function(){return JSON.stringify(this,function(e,t){if("_"!=e[0])return"parent"==e?"#<Suite>":"ctx"==e?"#<Context>":t},2)},i.prototype.resetTimeout=function(){var e=this,t=this.timeout()||1e9;this._enableTimeouts&&(this.clearTimeout(),this.timer=h(function(){e._enableTimeouts&&(e.callback(new Error("timeout of "+t+"ms exceeded")),e.timedOut=!0)},t))},i.prototype.globals=function(e){this._allowedGlobals=e},i.prototype.run=function(e){function t(e){o||(o=!0,s.emit("error",e||new Error("done() called multiple times; stacktrace may be inaccurate")))}function n(n){var r=s.timeout();if(!s.timedOut){if(i)return t(n||s._trace);s.clearTimeout(),s.duration=new u-a,i=!0,!n&&s.duration>r&&s._enableTimeouts&&(n=new Error("timeout of "+r+"ms exceeded")),e(n)}}function r(e){var t=e.call(l);t&&"function"==typeof t.then?(s.resetTimeout(),t.then(function(){n()},function(e){n(e||new Error("Promise rejected with no or falsy reason"))})):n()}var i,o,s=this,a=new u,l=this.ctx;if(l&&l.runnable&&l.runnable(this),this.callback=n,this.async){this.resetTimeout();try{this.fn.call(l,function(e){return e instanceof Error||"[object Error]"===p.call(e)?n(e):null!=e?n("[object Object]"===Object.prototype.toString.call(e)?new Error("done() invoked with non-Error: "+JSON.stringify(e)):new Error("done() invoked with non-Error: "+e)):void n()})}catch(h){n(c.getError(h))}}else{if(this.asyncOnly)return n(new Error("--async-only option in use without declaring `done()`"));try{this.pending?n():r(this.fn)}catch(h){n(c.getError(h))}}}}),e.register("runner.js",function(e,t,r){function i(e){var t=this;this._globals=[],this._abort=!1,this.suite=e,this.total=e.total(),this.failures=0,this.on("test end",function(e){t.checkGlobals(e)}),this.on("hook end",function(e){t.checkGlobals(e)}),this.grep(/.*/),this.globals(this.globalProps().concat(l()))}function s(){}function a(e,t){return d(t,function(t){if(/^d+/.test(t))return!1;if(n.navigator&&/^getInterface/.test(t))return!1;if(n.navigator&&/^\d+/.test(t))return!1;if(/^mocha-/.test(t))return!1;var r=d(e,function(e){return~e.indexOf("*")?0==t.indexOf(e.split("*")[0]):t==e});return 0==r.length&&(!n.navigator||"onerror"!==t)})}function l(){if("object"==typeof o&&"string"==typeof o.version){var e=o.version.split(".").reduce(function(e,t){return e<<8|t});if(e<2315)return["errno"]}return[]}var c=r("browser/events").EventEmitter,u=r("browser/debug")("mocha:runner"),h=(r("./test"),r("./utils")),d=h.filter,p=(h.keys,["setTimeout","clearTimeout","setInterval","clearInterval","XMLHttpRequest","Date","setImmediate","clearImmediate"]);e.exports=i,i.immediately=n.setImmediate||o.nextTick,s.prototype=c.prototype,i.prototype=new s,i.prototype.constructor=i,i.prototype.grep=function(e,t){return u("grep %s",e),this._grep=e,this._invert=t,this.total=this.grepTotal(this.suite),this},i.prototype.grepTotal=function(e){var t=this,n=0;return e.eachTest(function(e){var r=t._grep.test(e.fullTitle());t._invert&&(r=!r),r&&n++}),n},i.prototype.globalProps=function(){for(var e=h.keys(n),t=0;t<p.length;++t)~h.indexOf(e,p[t])||e.push(p[t]);return e},i.prototype.globals=function(e){return 0==arguments.length?this._globals:(u("globals %j",e),this._globals=this._globals.concat(e),this)},i.prototype.checkGlobals=function(e){if(!this.ignoreLeaks){var t,n=this._globals,r=this.globalProps();e&&(n=n.concat(e._allowedGlobals||[])),this.prevGlobalsLength!=r.length&&(this.prevGlobalsLength=r.length,t=a(n,r),this._globals=this._globals.concat(t),t.length>1?this.fail(e,new Error("global leaks detected: "+t.join(", "))):t.length&&this.fail(e,new Error("global leak detected: "+t[0])))}},i.prototype.fail=function(e,t){++this.failures,e.state="failed","string"==typeof t&&(t=new Error('the string "'+t+'" was thrown, throw an Error :)')),this.emit("fail",e,t)},i.prototype.failHook=function(e,t){this.fail(e,t),this.suite.bail()&&this.emit("end")},i.prototype.hook=function(e,t){function n(e){var r=o[e];return r?(s.currentRunnable=r,r.ctx.currentTest=s.test,s.emit("hook",r),r.on("error",function(e){s.failHook(r,e)}),void r.run(function(i){r.removeAllListeners("error");var o=r.error();return o&&s.fail(s.test,o),i?(s.failHook(r,i),t(i)):(s.emit("hook end",r),delete r.ctx.currentTest,void n(++e))})):t()}var r=this.suite,o=r["_"+e],s=this;i.immediately(function(){n(0)})},i.prototype.hooks=function(e,t,n){function r(s){return i.suite=s,s?void i.hook(e,function(e){if(e){var s=i.suite;return i.suite=o,n(e,s)}r(t.pop())}):(i.suite=o,n())}var i=this,o=this.suite;r(t.pop())},i.prototype.hookUp=function(e,t){var n=[this.suite].concat(this.parents()).reverse();this.hooks(e,n,t)},i.prototype.hookDown=function(e,t){var n=[this.suite].concat(this.parents());this.hooks(e,n,t)},i.prototype.parents=function(){for(var e=this.suite,t=[];e=e.parent;)t.push(e);return t},i.prototype.runTest=function(e){var t=this.test,n=this;this.asyncOnly&&(t.asyncOnly=!0);try{t.on("error",function(e){n.fail(t,e)}),t.run(e)}catch(r){e(r)}},i.prototype.runTests=function(e,t){function n(e,r,i){var s=o.suite;o.suite=i?r.parent:r,o.suite?o.hookUp("afterEach",function(e,i){return o.suite=s,e?n(e,i,!0):void t(r)}):(o.suite=s,t(r))}function r(a,l){if(o.failures&&e._bail)return t();if(o._abort)return t();if(a)return n(a,l,!0);if(i=s.shift(),!i)return t();var c=o._grep.test(i.fullTitle());return o._invert&&(c=!c),c?i.pending?(o.emit("pending",i),o.emit("test end",i),r()):(o.emit("test",o.test=i),void o.hookDown("beforeEach",function(e,t){return e?n(e,t,!1):(o.currentRunnable=o.test,void o.runTest(function(e){return i=o.test,e?(o.fail(i,e),o.emit("test end",i),o.hookUp("afterEach",r)):(i.state="passed",o.emit("pass",i),o.emit("test end",i),void o.hookUp("afterEach",r))}))})):r()}var i,o=this,s=e.tests.slice();this.next=r,r()},i.prototype.runSuite=function(e,t){function n(t){if(t)return t==e?r():r(t);if(o._abort)return r();var i=e.suites[s++];return i?void o.runSuite(i,n):r()}function r(n){o.suite=e,o.hook("afterAll",function(){o.emit("suite end",e),t(n)})}var i=this.grepTotal(e),o=this,s=0;return u("run suite %s",e.fullTitle()),i?(this.emit("suite",this.suite=e),void this.hook("beforeAll",function(t){return t?r():void o.runTests(e,n)})):t()},i.prototype.uncaught=function(e){e?u("uncaught exception %s",e!==function(){return this}.call(e)?e:e.message||e):(u("uncaught undefined exception"),e=h.undefinedError()),e.uncaught=!0;var t=this.currentRunnable;if(t){var n=t.state;if(this.fail(t,e),t.clearTimeout(),!n)return"test"==t.type?(this.emit("test end",t),void this.hookUp("afterEach",this.next)):void this.emit("end")}},i.prototype.run=function(e){function t(e){n.uncaught(e)}var n=this,e=e||function(){};return u("start"),this.on("end",function(){u("end"),o.removeListener("uncaughtException",t),e(n.failures)}),this.emit("start"),this.runSuite(this.suite,function(){u("finished running"),n.emit("end")}),o.on("uncaughtException",t),this},i.prototype.abort=function(){u("aborting"),this._abort=!0}}),e.register("suite.js",function(e,t,n){function r(e,t){this.title=e;var n=function(){};n.prototype=t,this.ctx=new n,this.suites=[],this.tests=[],this.pending=!1,this._beforeEach=[],this._beforeAll=[],this._afterEach=[],this._afterAll=[],this.root=!e,this._timeout=2e3,this._enableTimeouts=!0,this._slow=75,this._bail=!1}function i(){}var o=n("browser/events").EventEmitter,s=n("browser/debug")("mocha:suite"),a=n("./ms"),l=n("./utils"),c=n("./hook");t=e.exports=r,t.create=function(e,t){var n=new r(t,e.ctx);return n.parent=e,e.pending&&(n.pending=!0),t=n.fullTitle(),e.addSuite(n),n},i.prototype=o.prototype,r.prototype=new i,r.prototype.constructor=r,r.prototype.clone=function(){var e=new r(this.title);return s("clone"),e.ctx=this.ctx,e.timeout(this.timeout()),e.enableTimeouts(this.enableTimeouts()),e.slow(this.slow()),e.bail(this.bail()),e},r.prototype.timeout=function(e){return 0==arguments.length?this._timeout:("0"===e.toString()&&(this._enableTimeouts=!1),"string"==typeof e&&(e=a(e)),s("timeout %d",e),this._timeout=parseInt(e,10),this)},r.prototype.enableTimeouts=function(e){return 0===arguments.length?this._enableTimeouts:(s("enableTimeouts %s",e),this._enableTimeouts=e,this)},r.prototype.slow=function(e){return 0===arguments.length?this._slow:("string"==typeof e&&(e=a(e)),s("slow %d",e),this._slow=e,this)},r.prototype.bail=function(e){return 0==arguments.length?this._bail:(s("bail %s",e),this._bail=e,this)},r.prototype.beforeAll=function(e,t){if(this.pending)return this;"function"==typeof e&&(t=e,e=t.name),e='"before all" hook'+(e?": "+e:"");var n=new c(e,t);return n.parent=this,n.timeout(this.timeout()),n.enableTimeouts(this.enableTimeouts()),n.slow(this.slow()),n.ctx=this.ctx,this._beforeAll.push(n),this.emit("beforeAll",n),this},r.prototype.afterAll=function(e,t){if(this.pending)return this;"function"==typeof e&&(t=e,e=t.name),e='"after all" hook'+(e?": "+e:"");var n=new c(e,t);return n.parent=this,n.timeout(this.timeout()),n.enableTimeouts(this.enableTimeouts()),n.slow(this.slow()),n.ctx=this.ctx,this._afterAll.push(n),this.emit("afterAll",n),this},r.prototype.beforeEach=function(e,t){if(this.pending)return this;"function"==typeof e&&(t=e,e=t.name),e='"before each" hook'+(e?": "+e:"");var n=new c(e,t);return n.parent=this,n.timeout(this.timeout()),n.enableTimeouts(this.enableTimeouts()),n.slow(this.slow()),n.ctx=this.ctx,this._beforeEach.push(n),this.emit("beforeEach",n),this},r.prototype.afterEach=function(e,t){if(this.pending)return this;"function"==typeof e&&(t=e,e=t.name),e='"after each" hook'+(e?": "+e:"");var n=new c(e,t);return n.parent=this,n.timeout(this.timeout()),n.enableTimeouts(this.enableTimeouts()),n.slow(this.slow()),n.ctx=this.ctx,this._afterEach.push(n),this.emit("afterEach",n),this},r.prototype.addSuite=function(e){return e.parent=this,e.timeout(this.timeout()),e.enableTimeouts(this.enableTimeouts()),e.slow(this.slow()),e.bail(this.bail()),this.suites.push(e),this.emit("suite",e),this},r.prototype.addTest=function(e){return e.parent=this,e.timeout(this.timeout()),e.enableTimeouts(this.enableTimeouts()),e.slow(this.slow()),e.ctx=this.ctx,this.tests.push(e),this.emit("test",e),this},r.prototype.fullTitle=function(){if(this.parent){var e=this.parent.fullTitle();if(e)return e+" "+this.title}return this.title},r.prototype.total=function(){return l.reduce(this.suites,function(e,t){return e+t.total()},0)+this.tests.length},r.prototype.eachTest=function(e){return l.forEach(this.tests,e),l.forEach(this.suites,function(t){t.eachTest(e)}),this}}),e.register("test.js",function(e,t,n){function r(e,t){o.call(this,e,t),this.pending=!t,this.type="test"}function i(){}var o=n("./runnable");e.exports=r,i.prototype=o.prototype,r.prototype=new i,r.prototype.constructor=r}),e.register("utils.js",function(e,t,n){function r(e){return!~d.indexOf(e)}function i(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew[ \t]+(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}var o=n("browser/fs"),s=n("browser/path"),a=s.basename,l=o.existsSync||s.existsSync,c=n("browser/glob"),u=s.join,h=n("browser/debug")("mocha:watch"),d=["node_modules",".git"];t.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.forEach=function(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r)},t.map=function(e,t,n){for(var r=[],i=0,o=e.length;i<o;i++)r.push(t.call(n,e[i],i));return r},t.indexOf=function(e,t,n){for(var r=n||0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},t.reduce=function(e,t,n){for(var r=n,i=0,o=e.length;i<o;i++)r=t(r,e[i],i,e);return r},t.filter=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},t.keys=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},t.watch=function(e,t){var n={interval:100};e.forEach(function(e){h("file %s",e),o.watchFile(e,n,function(n,r){r.mtime<n.mtime&&t(e)})})},t.files=function(e,n,i){i=i||[],n=n||["js"];var s=new RegExp("\\.("+n.join("|")+")$");return o.readdirSync(e).filter(r).forEach(function(r){r=u(e,r),o.statSync(r).isDirectory()?t.files(r,n,i):r.match(s)&&i.push(r)}),i},t.slug=function(e){return e.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")},t.clean=function(e){e=e.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,"").replace(/^function *\(.*\) *{|\(.*\) *=> *{?/,"").replace(/\s+\}$/,"");var n=e.match(/^\n?( *)/)[1].length,r=e.match(/^\n?(\t*)/)[1].length,i=new RegExp("^\n?"+(r?"\t":" ")+"{"+(r?r:n)+"}","gm");return e=e.replace(i,""),t.trim(e)},t.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},t.parseQuery=function(e){return t.reduce(e.replace("?","").split("&"),function(e,t){var n=t.indexOf("="),r=t.slice(0,n),i=t.slice(++n);return e[r]=decodeURIComponent(i),e},{})},t.highlightTags=function(e){for(var t=document.getElementById("mocha").getElementsByTagName(e),n=0,r=t.length;n<r;++n)t[n].innerHTML=i(t[n].innerHTML)};var p=function(e,n){switch(n=n||t.type(e)){case"function":return"[Function]";case"object":return"{}";case"array":return"[]";default:return e.toString()}};t.type=function(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)?"buffer":Object.prototype.toString.call(e).replace(/^\[.+\s(.+?)\]$/,"$1").toLowerCase()},t.stringify=function(e){var n,r=t.type(e);if("null"===r||"undefined"===r)return"["+r+"]";if("date"===r)return"[Date: "+e.toISOString()+"]";if(!~t.indexOf(["object","array","function"],r))return e.toString();for(n in e)if(e.hasOwnProperty(n))return JSON.stringify(t.canonicalize(e),null,2).replace(/,(\n|$)/g,"$1");return p(e,r)},t.isBuffer=function(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)},t.canonicalize=function(e,n){var r,i,o=t.type(e),s=function(e,t){n.push(e),t(),n.pop()};if(n=n||[],t.indexOf(n,e)!==-1)return"[Circular]";switch(o){case"undefined":r="[undefined]";break;case"buffer":case"null":r=e;break;case"array":s(e,function(){r=t.map(e,function(e){return t.canonicalize(e,n)})});break;case"date":r="[Date: "+e.toISOString()+"]";break;case"function":for(i in e){r={};break}if(!r){r=p(e,o);break}case"object":r=r||{},s(e,function(){t.forEach(t.keys(e).sort(),function(i){r[i]=t.canonicalize(e[i],n)})});break;case"number":case"boolean":r=e;break;default:r=e.toString()}return r},t.lookupFiles=function f(e,t,n){var r=[],i=new RegExp("\\.("+t.join("|")+")$");if(!l(e)){if(!l(e+".js")){if(r=c.sync(e),!r.length)throw new Error("cannot resolve path (or pattern) '"+e+"'");return r}e+=".js"}try{var s=o.statSync(e);if(s.isFile())return e}catch(h){return}return o.readdirSync(e).forEach(function(s){s=u(e,s);try{var l=o.statSync(s);if(l.isDirectory())return void(n&&(r=r.concat(f(s,t,n))))}catch(c){return}l.isFile()&&i.test(s)&&"."!==a(s)[0]&&r.push(s)}),r},t.undefinedError=function(){return new Error("Caught undefined error, did you throw without specifying what?")},t.getError=function(e){return e||t.undefinedError()}});var n=function(){return this}(),r=n.Date,i=n.setTimeout,o=(n.setInterval,n.clearTimeout,n.clearInterval,{});o.exit=function(e){},o.stdout={};var s=[],a=n.onerror;o.removeListener=function(e,t){if("uncaughtException"==e){a?n.onerror=a:n.onerror=function(){};var r=l.utils.indexOf(s,t);r!=-1&&s.splice(r,1)}},o.on=function(e,t){"uncaughtException"==e&&(n.onerror=function(e,n,r){return t(new Error(e+" ("+n+":"+r+")")),!0},s.push(t))};var l=n.Mocha=e("mocha"),c=n.mocha=new l({reporter:"html"});c.suite.removeAllListeners("pre-require");var u,h=[];l.Runner.immediately=function(e){h.push(e),u||(u=i(t,0))},c.throwError=function(e){throw l.utils.forEach(s,function(t){t(e)}),e},c.ui=function(e){return l.prototype.ui.call(this,e),this.suite.emit("pre-require",n,null,this),this},c.setup=function(e){"string"==typeof e&&(e={ui:e});for(var t in e)this[t](e[t]);return this},c.run=function(e){var t=c.options;c.globals("location");var r=l.utils.parseQuery(n.location.search||"");return r.grep&&c.grep(r.grep),r.invert&&c.invert(),l.prototype.run.call(c,function(r){var i=n.document;i&&i.getElementById("mocha")&&t.noHighlighting!==!0&&l.utils.highlightTags("code"),e&&e(r)})},l.process=o}();